const Je=function(){const S=document.createElement("link").relList;if(S&&S.supports&&S.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))T(f);new MutationObserver(f=>{for(const e of f)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&T(o)}).observe(document,{childList:!0,subtree:!0});function m(f){const e={};return f.integrity&&(e.integrity=f.integrity),f.referrerpolicy&&(e.referrerPolicy=f.referrerpolicy),f.crossorigin==="use-credentials"?e.credentials="include":f.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function T(f){if(f.ep)return;f.ep=!0;const e=m(f);fetch(f.href,e)}};Je();var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(y,S){(function(T,f){y.exports=f()})(fe,function(){return function(m){var T={};function f(e){if(T[e])return T[e].exports;var o=T[e]={i:e,l:!1,exports:{}};return m[e].call(o.exports,o,o.exports,f),o.l=!0,o.exports}return f.m=m,f.c=T,f.d=function(e,o,i){f.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:i})},f.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,o){if(o&1&&(e=f(e)),o&8||o&4&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(f.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),o&2&&typeof e!="string")for(var n in e)f.d(i,n,function(c){return e[c]}.bind(null,n));return i},f.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(o,"a",o),o},f.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},f.p="",f(f.s=21)}([function(m,T){var f={};m.exports=f,function(){f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(o,i){var n,c;typeof i=="boolean"?(n=2,c=i):(n=1,c=!0);for(var l=n;l<arguments.length;l++){var u=arguments[l];if(u)for(var r in u)c&&u[r]&&u[r].constructor===Object&&(!o[r]||o[r].constructor===Object)?(o[r]=o[r]||{},f.extend(o[r],c,u[r])):o[r]=u[r]}return o},f.clone=function(o,i){return f.extend({},i,o)},f.keys=function(o){if(Object.keys)return Object.keys(o);var i=[];for(var n in o)i.push(n);return i},f.values=function(o){var i=[];if(Object.keys){for(var n=Object.keys(o),c=0;c<n.length;c++)i.push(o[n[c]]);return i}for(var l in o)i.push(o[l]);return i},f.get=function(o,i,n,c){i=i.split(".").slice(n,c);for(var l=0;l<i.length;l+=1)o=o[i[l]];return o},f.set=function(o,i,n,c,l){var u=i.split(".").slice(c,l);return f.get(o,i,0,-1)[u[u.length-1]]=n,n},f.shuffle=function(o){for(var i=o.length-1;i>0;i--){var n=Math.floor(f.random()*(i+1)),c=o[i];o[i]=o[n],o[n]=c}return o},f.choose=function(o){return o[Math.floor(f.random()*o.length)]},f.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},f.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},f.isFunction=function(o){return typeof o=="function"},f.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},f.isString=function(o){return toString.call(o)==="[object String]"},f.clamp=function(o,i,n){return o<i?i:o>n?n:o},f.sign=function(o){return o<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(o,i){return o=typeof o<"u"?o:0,i=typeof i<"u"?i:1,o+e()*(i-o)};var e=function(){return f._seed=(f._seed*9301+49297)%233280,f._seed/233280};f.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[o]||(f.warn(o),f._warnedOnce[o]=!0)},f.deprecated=function(o,i,n){o[i]=f.chain(function(){f.warnOnce("\u{1F505} deprecated \u{1F505}",n)},o[i])},f.nextId=function(){return f._nextId++},f.indexOf=function(o,i){if(o.indexOf)return o.indexOf(i);for(var n=0;n<o.length;n++)if(o[n]===i)return n;return-1},f.map=function(o,i){if(o.map)return o.map(i);for(var n=[],c=0;c<o.length;c+=1)n.push(i(o[c]));return n},f.topologicalSort=function(o){var i=[],n=[],c=[];for(var l in o)!n[l]&&!c[l]&&f._topologicalSort(l,n,c,o,i);return i},f._topologicalSort=function(o,i,n,c,l){var u=c[o]||[];n[o]=!0;for(var r=0;r<u.length;r+=1){var t=u[r];n[t]||i[t]||f._topologicalSort(t,i,n,c,l)}n[o]=!1,i[o]=!0,l.push(o)},f.chain=function(){for(var o=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?o.push.apply(o,n._chained):o.push(n)}var c=function(){for(var l,u=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)u[r]=arguments[r];for(r=0;r<o.length;r+=1){var s=o[r].apply(l,u);typeof s<"u"&&(l=s)}return l};return c._chained=o,c},f.chainPathBefore=function(o,i,n){return f.set(o,i,f.chain(n,f.get(o,i)))},f.chainPathAfter=function(o,i,n){return f.set(o,i,f.chain(f.get(o,i),n))},f.setDecomp=function(o){f._decomp=o},f.getDecomp=function(){var o=f._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof fe<"u"&&(o=fe.decomp)}catch{o=null}return o}}()},function(m,T){var f={};m.exports=f,function(){f.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&f.update(o,e),o},f.update=function(e,o,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<o.length;n++){var c=o[n];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},f.contains=function(e,o){return o.x>=e.min.x&&o.x<=e.max.x&&o.y>=e.min.y&&o.y<=e.max.y},f.overlaps=function(e,o){return e.min.x<=o.max.x&&e.max.x>=o.min.x&&e.max.y>=o.min.y&&e.min.y<=o.max.y},f.translate=function(e,o){e.min.x+=o.x,e.max.x+=o.x,e.min.y+=o.y,e.max.y+=o.y},f.shift=function(e,o){var i=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=o.x,e.max.x=o.x+i,e.min.y=o.y,e.max.y=o.y+n}}()},function(m,T){var f={};m.exports=f,function(){f.create=function(e,o){return{x:e||0,y:o||0}},f.clone=function(e){return{x:e.x,y:e.y}},f.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},f.rotate=function(e,o,i){var n=Math.cos(o),c=Math.sin(o);i||(i={});var l=e.x*n-e.y*c;return i.y=e.x*c+e.y*n,i.x=l,i},f.rotateAbout=function(e,o,i,n){var c=Math.cos(o),l=Math.sin(o);n||(n={});var u=i.x+((e.x-i.x)*c-(e.y-i.y)*l);return n.y=i.y+((e.x-i.x)*l+(e.y-i.y)*c),n.x=u,n},f.normalise=function(e){var o=f.magnitude(e);return o===0?{x:0,y:0}:{x:e.x/o,y:e.y/o}},f.dot=function(e,o){return e.x*o.x+e.y*o.y},f.cross=function(e,o){return e.x*o.y-e.y*o.x},f.cross3=function(e,o,i){return(o.x-e.x)*(i.y-e.y)-(o.y-e.y)*(i.x-e.x)},f.add=function(e,o,i){return i||(i={}),i.x=e.x+o.x,i.y=e.y+o.y,i},f.sub=function(e,o,i){return i||(i={}),i.x=e.x-o.x,i.y=e.y-o.y,i},f.mult=function(e,o){return{x:e.x*o,y:e.y*o}},f.div=function(e,o){return{x:e.x/o,y:e.y/o}},f.perp=function(e,o){return o=o===!0?-1:1,{x:o*-e.y,y:o*e.x}},f.neg=function(e){return{x:-e.x,y:-e.y}},f.angle=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]}()},function(m,T,f){var e={};m.exports=e;var o=f(2),i=f(0);(function(){e.create=function(n,c){for(var l=[],u=0;u<n.length;u++){var r=n[u],t={x:r.x,y:r.y,index:u,body:c,isInternal:!1};l.push(t)}return l},e.fromPath=function(n,c){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return n.replace(l,function(r,t,s){u.push({x:parseFloat(t),y:parseFloat(s)})}),e.create(u,c)},e.centre=function(n){for(var c=e.area(n,!0),l={x:0,y:0},u,r,t,s=0;s<n.length;s++)t=(s+1)%n.length,u=o.cross(n[s],n[t]),r=o.mult(o.add(n[s],n[t]),u),l=o.add(l,r);return o.div(l,6*c)},e.mean=function(n){for(var c={x:0,y:0},l=0;l<n.length;l++)c.x+=n[l].x,c.y+=n[l].y;return o.div(c,n.length)},e.area=function(n,c){for(var l=0,u=n.length-1,r=0;r<n.length;r++)l+=(n[u].x-n[r].x)*(n[u].y+n[r].y),u=r;return c?l/2:Math.abs(l)/2},e.inertia=function(n,c){for(var l=0,u=0,r=n,t,s,a=0;a<r.length;a++)s=(a+1)%r.length,t=Math.abs(o.cross(r[s],r[a])),l+=t*(o.dot(r[s],r[s])+o.dot(r[s],r[a])+o.dot(r[a],r[a])),u+=t;return c/6*(l/u)},e.translate=function(n,c,l){l=typeof l<"u"?l:1;var u=n.length,r=c.x*l,t=c.y*l,s;for(s=0;s<u;s++)n[s].x+=r,n[s].y+=t;return n},e.rotate=function(n,c,l){if(c!==0){var u=Math.cos(c),r=Math.sin(c),t=l.x,s=l.y,a=n.length,h,d,I,M;for(M=0;M<a;M++)h=n[M],d=h.x-t,I=h.y-s,h.x=t+(d*u-I*r),h.y=s+(d*r+I*u);return n}},e.contains=function(n,c){for(var l=c.x,u=c.y,r=n.length,t=n[r-1],s,a=0;a<r;a++){if(s=n[a],(l-t.x)*(s.y-t.y)+(u-t.y)*(t.x-s.x)>0)return!1;t=s}return!0},e.scale=function(n,c,l,u){if(c===1&&l===1)return n;u=u||e.centre(n);for(var r,t,s=0;s<n.length;s++)r=n[s],t=o.sub(r,u),n[s].x=u.x+t.x*c,n[s].y=u.y+t.y*l;return n},e.chamfer=function(n,c,l,u,r){typeof c=="number"?c=[c]:c=c||[8],l=typeof l<"u"?l:-1,u=u||2,r=r||14;for(var t=[],s=0;s<n.length;s++){var a=n[s-1>=0?s-1:n.length-1],h=n[s],d=n[(s+1)%n.length],I=c[s<c.length?s:c.length-1];if(I===0){t.push(h);continue}var M=o.normalise({x:h.y-a.y,y:a.x-h.x}),v=o.normalise({x:d.y-h.y,y:h.x-d.x}),p=Math.sqrt(2*Math.pow(I,2)),x=o.mult(i.clone(M),I),g=o.normalise(o.mult(o.add(M,v),.5)),C=o.sub(h,o.mult(g,p)),P=l;l===-1&&(P=Math.pow(I,.32)*1.75),P=i.clamp(P,u,r),P%2===1&&(P+=1);for(var A=Math.acos(o.dot(M,v)),w=A/P,E=0;E<P;E++)t.push(o.add(o.rotate(x,w*E),C))}return t},e.clockwiseSort=function(n){var c=e.mean(n);return n.sort(function(l,u){return o.angle(c,l)-o.angle(c,u)}),n},e.isConvex=function(n){var c=0,l=n.length,u,r,t,s;if(l<3)return null;for(u=0;u<l;u++)if(r=(u+1)%l,t=(u+2)%l,s=(n[r].x-n[u].x)*(n[t].y-n[r].y),s-=(n[r].y-n[u].y)*(n[t].x-n[r].x),s<0?c|=1:s>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(n){var c=[],l=[],u,r;for(n=n.slice(0),n.sort(function(t,s){var a=t.x-s.x;return a!==0?a:t.y-s.y}),r=0;r<n.length;r+=1){for(u=n[r];l.length>=2&&o.cross3(l[l.length-2],l[l.length-1],u)<=0;)l.pop();l.push(u)}for(r=n.length-1;r>=0;r-=1){for(u=n[r];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],u)<=0;)c.pop();c.push(u)}return c.pop(),l.pop(),c.concat(l)}})()},function(m,T,f){var e={};m.exports=e;var o=f(0);(function(){e.on=function(i,n,c){for(var l=n.split(" "),u,r=0;r<l.length;r++)u=l[r],i.events=i.events||{},i.events[u]=i.events[u]||[],i.events[u].push(c);return c},e.off=function(i,n,c){if(!n){i.events={};return}typeof n=="function"&&(c=n,n=o.keys(i.events).join(" "));for(var l=n.split(" "),u=0;u<l.length;u++){var r=i.events[l[u]],t=[];if(c&&r)for(var s=0;s<r.length;s++)r[s]!==c&&t.push(r[s]);i.events[l[u]]=t}},e.trigger=function(i,n,c){var l,u,r,t,s=i.events;if(s&&o.keys(s).length>0){c||(c={}),l=n.split(" ");for(var a=0;a<l.length;a++)if(u=l[a],r=s[u],r){t=o.clone(c,!1),t.name=u,t.source=i;for(var h=0;h<r.length;h++)r[h].apply(i,[t])}}}})()},function(m,T,f){var e={};m.exports=e;var o=f(4),i=f(0),n=f(1),c=f(6);(function(){e.create=function(l){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},e.setModified=function(l,u,r,t){if(l.isModified=u,u&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),r&&l.parent&&e.setModified(l.parent,u,r,t),t)for(var s=0;s<l.composites.length;s++){var a=l.composites[s];e.setModified(a,u,r,t)}},e.add=function(l,u){var r=[].concat(u);o.trigger(l,"beforeAdd",{object:u});for(var t=0;t<r.length;t++){var s=r[t];switch(s.type){case"body":if(s.parent!==s){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(l,s);break;case"constraint":e.addConstraint(l,s);break;case"composite":e.addComposite(l,s);break;case"mouseConstraint":e.addConstraint(l,s.constraint);break}}return o.trigger(l,"afterAdd",{object:u}),l},e.remove=function(l,u,r){var t=[].concat(u);o.trigger(l,"beforeRemove",{object:u});for(var s=0;s<t.length;s++){var a=t[s];switch(a.type){case"body":e.removeBody(l,a,r);break;case"constraint":e.removeConstraint(l,a,r);break;case"composite":e.removeComposite(l,a,r);break;case"mouseConstraint":e.removeConstraint(l,a.constraint);break}}return o.trigger(l,"afterRemove",{object:u}),l},e.addComposite=function(l,u){return l.composites.push(u),u.parent=l,e.setModified(l,!0,!0,!1),l},e.removeComposite=function(l,u,r){var t=i.indexOf(l.composites,u);if(t!==-1&&e.removeCompositeAt(l,t),r)for(var s=0;s<l.composites.length;s++)e.removeComposite(l.composites[s],u,!0);return l},e.removeCompositeAt=function(l,u){return l.composites.splice(u,1),e.setModified(l,!0,!0,!1),l},e.addBody=function(l,u){return l.bodies.push(u),e.setModified(l,!0,!0,!1),l},e.removeBody=function(l,u,r){var t=i.indexOf(l.bodies,u);if(t!==-1&&e.removeBodyAt(l,t),r)for(var s=0;s<l.composites.length;s++)e.removeBody(l.composites[s],u,!0);return l},e.removeBodyAt=function(l,u){return l.bodies.splice(u,1),e.setModified(l,!0,!0,!1),l},e.addConstraint=function(l,u){return l.constraints.push(u),e.setModified(l,!0,!0,!1),l},e.removeConstraint=function(l,u,r){var t=i.indexOf(l.constraints,u);if(t!==-1&&e.removeConstraintAt(l,t),r)for(var s=0;s<l.composites.length;s++)e.removeConstraint(l.composites[s],u,!0);return l},e.removeConstraintAt=function(l,u){return l.constraints.splice(u,1),e.setModified(l,!0,!0,!1),l},e.clear=function(l,u,r){if(r)for(var t=0;t<l.composites.length;t++)e.clear(l.composites[t],u,!0);return u?l.bodies=l.bodies.filter(function(s){return s.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,e.setModified(l,!0,!0,!1),l},e.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var u=[].concat(l.bodies),r=0;r<l.composites.length;r++)u=u.concat(e.allBodies(l.composites[r]));return l.cache&&(l.cache.allBodies=u),u},e.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var u=[].concat(l.constraints),r=0;r<l.composites.length;r++)u=u.concat(e.allConstraints(l.composites[r]));return l.cache&&(l.cache.allConstraints=u),u},e.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var u=[].concat(l.composites),r=0;r<l.composites.length;r++)u=u.concat(e.allComposites(l.composites[r]));return l.cache&&(l.cache.allComposites=u),u},e.get=function(l,u,r){var t,s;switch(r){case"body":t=e.allBodies(l);break;case"constraint":t=e.allConstraints(l);break;case"composite":t=e.allComposites(l).concat(l);break}return t?(s=t.filter(function(a){return a.id.toString()===u.toString()}),s.length===0?null:s[0]):null},e.move=function(l,u,r){return e.remove(l,u),e.add(r,u),l},e.rebase=function(l){for(var u=e.allBodies(l).concat(e.allConstraints(l)).concat(e.allComposites(l)),r=0;r<u.length;r++)u[r].id=i.nextId();return l},e.translate=function(l,u,r){for(var t=r?e.allBodies(l):l.bodies,s=0;s<t.length;s++)c.translate(t[s],u);return l},e.rotate=function(l,u,r,t){for(var s=Math.cos(u),a=Math.sin(u),h=t?e.allBodies(l):l.bodies,d=0;d<h.length;d++){var I=h[d],M=I.position.x-r.x,v=I.position.y-r.y;c.setPosition(I,{x:r.x+(M*s-v*a),y:r.y+(M*a+v*s)}),c.rotate(I,u)}return l},e.scale=function(l,u,r,t,s){for(var a=s?e.allBodies(l):l.bodies,h=0;h<a.length;h++){var d=a[h],I=d.position.x-t.x,M=d.position.y-t.y;c.setPosition(d,{x:t.x+I*u,y:t.y+M*r}),c.scale(d,u,r)}return l},e.bounds=function(l){for(var u=e.allBodies(l),r=[],t=0;t<u.length;t+=1){var s=u[t];r.push(s.bounds.min,s.bounds.max)}return n.create(r)}})()},function(m,T,f){var e={};m.exports=e;var o=f(3),i=f(2),n=f(7);f(16);var c=f(0),l=f(1),u=f(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var s={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},a=c.extend(s,t);return r(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,s){s=s||{},e.set(t,{bounds:t.bounds||l.create(t.vertices),positionPrev:t.positionPrev||i.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),o.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),l.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:s.axes||t.axes,area:s.area||t.area,mass:s.mass||t.mass,inertia:s.inertia||t.inertia});var a=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),h=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||h,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,s,a){var h;typeof s=="string"&&(h=s,s={},s[h]=a);for(h in s)if(!!Object.prototype.hasOwnProperty.call(s,h))switch(a=s[h],h){case"isStatic":e.setStatic(t,a);break;case"isSleeping":n.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[h]=a}},e.setStatic=function(t,s){for(var a=0;a<t.parts.length;a++){var h=t.parts[a];h.isStatic=s,s?(h._original={restitution:h.restitution,friction:h.friction,mass:h.mass,inertia:h.inertia,density:h.density,inverseMass:h.inverseMass,inverseInertia:h.inverseInertia},h.restitution=0,h.friction=1,h.mass=h.inertia=h.density=1/0,h.inverseMass=h.inverseInertia=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.angularVelocity=0,h.speed=0,h.angularSpeed=0,h.motion=0):h._original&&(h.restitution=h._original.restitution,h.friction=h._original.friction,h.mass=h._original.mass,h.inertia=h._original.inertia,h.density=h._original.density,h.inverseMass=h._original.inverseMass,h.inverseInertia=h._original.inverseInertia,h._original=null)}},e.setMass=function(t,s){var a=t.inertia/(t.mass/6);t.inertia=a*(s/6),t.inverseInertia=1/t.inertia,t.mass=s,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,s){e.setMass(t,s*t.area),t.density=s},e.setInertia=function(t,s){t.inertia=s,t.inverseInertia=1/t.inertia},e.setVertices=function(t,s){s[0].body===t?t.vertices=s:t.vertices=o.create(s,t),t.axes=u.fromVertices(t.vertices),t.area=o.area(t.vertices),e.setMass(t,t.density*t.area);var a=o.centre(t.vertices);o.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),l.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,s,a){var h;for(s=s.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,h=0;h<s.length;h++){var d=s[h];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var I=[];for(h=0;h<s.length;h++)I=I.concat(s[h].vertices);o.clockwiseSort(I);var M=o.hull(I),v=o.centre(M);e.setVertices(t,M),o.translate(t.vertices,v)}var p=e._totalProperties(t);t.area=p.area,t.parent=t,t.position.x=p.centre.x,t.position.y=p.centre.y,t.positionPrev.x=p.centre.x,t.positionPrev.y=p.centre.y,e.setMass(t,p.mass),e.setInertia(t,p.inertia),e.setPosition(t,p.centre)}},e.setCentre=function(t,s,a){a?(t.positionPrev.x+=s.x,t.positionPrev.y+=s.y,t.position.x+=s.x,t.position.y+=s.y):(t.positionPrev.x=s.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=s.y-(t.position.y-t.positionPrev.y),t.position.x=s.x,t.position.y=s.y)},e.setPosition=function(t,s){var a=i.sub(s,t.position);t.positionPrev.x+=a.x,t.positionPrev.y+=a.y;for(var h=0;h<t.parts.length;h++){var d=t.parts[h];d.position.x+=a.x,d.position.y+=a.y,o.translate(d.vertices,a),l.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,s){var a=s-t.angle;t.anglePrev+=a;for(var h=0;h<t.parts.length;h++){var d=t.parts[h];d.angle+=a,o.rotate(d.vertices,a,t.position),u.rotate(d.axes,a),l.update(d.bounds,d.vertices,t.velocity),h>0&&i.rotateAbout(d.position,a,t.position,d.position)}},e.setVelocity=function(t,s){t.positionPrev.x=t.position.x-s.x,t.positionPrev.y=t.position.y-s.y,t.velocity.x=s.x,t.velocity.y=s.y,t.speed=i.magnitude(t.velocity)},e.setAngularVelocity=function(t,s){t.anglePrev=t.angle-s,t.angularVelocity=s,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,s){e.setPosition(t,i.add(t.position,s))},e.rotate=function(t,s,a){if(!a)e.setAngle(t,t.angle+s);else{var h=Math.cos(s),d=Math.sin(s),I=t.position.x-a.x,M=t.position.y-a.y;e.setPosition(t,{x:a.x+(I*h-M*d),y:a.y+(I*d+M*h)}),e.setAngle(t,t.angle+s)}},e.scale=function(t,s,a,h){var d=0,I=0;h=h||t.position;for(var M=0;M<t.parts.length;M++){var v=t.parts[M];o.scale(v.vertices,s,a,h),v.axes=u.fromVertices(v.vertices),v.area=o.area(v.vertices),e.setMass(v,t.density*v.area),o.translate(v.vertices,{x:-v.position.x,y:-v.position.y}),e.setInertia(v,e._inertiaScale*o.inertia(v.vertices,v.mass)),o.translate(v.vertices,{x:v.position.x,y:v.position.y}),M>0&&(d+=v.area,I+=v.inertia),v.position.x=h.x+(v.position.x-h.x)*s,v.position.y=h.y+(v.position.y-h.y)*a,l.update(v.bounds,v.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,I))),t.circleRadius&&(s===a?t.circleRadius*=s:t.circleRadius=null)},e.update=function(t,s,a,h){var d=Math.pow(s*a*t.timeScale,2),I=1-t.frictionAir*a*t.timeScale,M=t.position.x-t.positionPrev.x,v=t.position.y-t.positionPrev.y;t.velocity.x=M*I*h+t.force.x/t.mass*d,t.velocity.y=v*I*h+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*I*h+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=i.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var p=0;p<t.parts.length;p++){var x=t.parts[p];o.translate(x.vertices,t.velocity),p>0&&(x.position.x+=t.velocity.x,x.position.y+=t.velocity.y),t.angularVelocity!==0&&(o.rotate(x.vertices,t.angularVelocity,t.position),u.rotate(x.axes,t.angularVelocity),p>0&&i.rotateAbout(x.position,t.angularVelocity,t.position,x.position)),l.update(x.bounds,x.vertices,t.velocity)}},e.applyForce=function(t,s,a){t.force.x+=a.x,t.force.y+=a.y;var h={x:s.x-t.position.x,y:s.y-t.position.y};t.torque+=h.x*a.y-h.y*a.x},e._totalProperties=function(t){for(var s={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var h=t.parts[a],d=h.mass!==1/0?h.mass:1;s.mass+=d,s.area+=h.area,s.inertia+=h.inertia,s.centre=i.add(s.centre,i.mult(h.position,d))}return s.centre=i.div(s.centre,s.mass),s}})()},function(m,T,f){var e={};m.exports=e;var o=f(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,n){for(var c=n*n*n,l=0;l<i.length;l++){var u=i[l],r=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var t=Math.min(u.motion,r),s=Math.max(u.motion,r);u.motion=e._minBias*t+(1-e._minBias)*s,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*c?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(i,n){for(var c=n*n*n,l=0;l<i.length;l++){var u=i[l];if(!!u.isActive){var r=u.collision,t=r.bodyA.parent,s=r.bodyB.parent;if(!(t.isSleeping&&s.isSleeping||t.isStatic||s.isStatic)&&(t.isSleeping||s.isSleeping)){var a=t.isSleeping&&!t.isStatic?t:s,h=a===t?s:t;!a.isStatic&&h.motion>e._motionWakeThreshold*c&&e.set(a,!1)}}}},e.set=function(i,n){var c=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,c||o.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,c&&o.trigger(i,"sleepEnd"))}})()},function(m,T,f){var e={};m.exports=e;var o=f(3),i=f(9);(function(){var n=[],c={overlap:0,axis:null},l={overlap:0,axis:null};e.create=function(u,r){return{pair:null,collided:!1,bodyA:u,bodyB:r,parentA:u.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,r,t){if(e._overlapAxes(c,u.vertices,r.vertices,u.axes),c.overlap<=0||(e._overlapAxes(l,r.vertices,u.vertices,r.axes),l.overlap<=0))return null;var s=t&&t.table[i.id(u,r)],a;s?a=s.collision:(a=e.create(u,r),a.collided=!0,a.bodyA=u.id<r.id?u:r,a.bodyB=u.id<r.id?r:u,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),u=a.bodyA,r=a.bodyB;var h;c.overlap<l.overlap?h=c:h=l;var d=a.normal,I=a.supports,M=h.axis,v=M.x,p=M.y;v*(r.position.x-u.position.x)+p*(r.position.y-u.position.y)<0?(d.x=v,d.y=p):(d.x=-v,d.y=-p),a.tangent.x=-d.y,a.tangent.y=d.x,a.depth=h.overlap,a.penetration.x=d.x*a.depth,a.penetration.y=d.y*a.depth;var x=e._findSupports(u,r,d,1),g=0;if(o.contains(u.vertices,x[0])&&(I[g++]=x[0]),o.contains(u.vertices,x[1])&&(I[g++]=x[1]),g<2){var C=e._findSupports(r,u,d,-1);o.contains(r.vertices,C[0])&&(I[g++]=C[0]),g<2&&o.contains(r.vertices,C[1])&&(I[g++]=C[1])}return g===0&&(I[g++]=x[0]),I.length=g,a},e._overlapAxes=function(u,r,t,s){var a=r.length,h=t.length,d=r[0].x,I=r[0].y,M=t[0].x,v=t[0].y,p=s.length,x=Number.MAX_VALUE,g=0,C,P,A,w,E,B;for(E=0;E<p;E++){var R=s[E],L=R.x,F=R.y,O=d*L+I*F,D=M*L+v*F,k=O,V=D;for(B=1;B<a;B+=1)w=r[B].x*L+r[B].y*F,w>k?k=w:w<O&&(O=w);for(B=1;B<h;B+=1)w=t[B].x*L+t[B].y*F,w>V?V=w:w<D&&(D=w);if(P=k-D,A=V-O,C=P<A?P:A,C<x&&(x=C,g=E,C<=0))break}u.axis=s[g],u.overlap=x},e._projectToAxis=function(u,r,t){for(var s=r[0].x*t.x+r[0].y*t.y,a=s,h=1;h<r.length;h+=1){var d=r[h].x*t.x+r[h].y*t.y;d>a?a=d:d<s&&(s=d)}u.min=s,u.max=a},e._findSupports=function(u,r,t,s){var a=r.vertices,h=a.length,d=u.position.x,I=u.position.y,M=t.x*s,v=t.y*s,p=Number.MAX_VALUE,x,g,C,P,A;for(A=0;A<h;A+=1)g=a[A],P=M*(d-g.x)+v*(I-g.y),P<p&&(p=P,x=g);return C=a[(h+x.index-1)%h],p=M*(d-C.x)+v*(I-C.y),g=a[(x.index+1)%h],M*(d-g.x)+v*(I-g.y)<p?(n[0]=x,n[1]=g,n):(n[0]=x,n[1]=C,n)}})()},function(m,T,f){var e={};m.exports=e;var o=f(17);(function(){e.create=function(i,n){var c=i.bodyA,l=i.bodyB,u={id:e.id(c,l),bodyA:c,bodyB:l,collision:i,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||l.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,i,n),u},e.update=function(i,n,c){var l=i.contacts,u=n.supports,r=i.activeContacts,t=n.parentA,s=n.parentB,a=t.vertices.length;i.isActive=!0,i.timeUpdated=c,i.collision=n,i.separation=n.depth,i.inverseMass=t.inverseMass+s.inverseMass,i.friction=t.friction<s.friction?t.friction:s.friction,i.frictionStatic=t.frictionStatic>s.frictionStatic?t.frictionStatic:s.frictionStatic,i.restitution=t.restitution>s.restitution?t.restitution:s.restitution,i.slop=t.slop>s.slop?t.slop:s.slop,n.pair=i,r.length=0;for(var h=0;h<u.length;h++){var d=u[h],I=d.body===t?d.index:a+d.index,M=l[I];M?r.push(M):r.push(l[I]=o.create(d))}},e.setActive=function(i,n,c){n?(i.isActive=!0,i.timeUpdated=c):(i.isActive=!1,i.activeContacts.length=0)},e.id=function(i,n){return i.id<n.id?"A"+i.id+"B"+n.id:"A"+n.id+"B"+i.id}})()},function(m,T,f){var e={};m.exports=e;var o=f(3),i=f(2),n=f(7),c=f(1),l=f(11),u=f(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var s=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,h=i.magnitude(i.sub(s,a));t.length=typeof t.length<"u"?t.length:h,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=u.extend(d,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var s=r[t],a=s.constraintImpulse;s.isStatic||a.x===0&&a.y===0&&a.angle===0||(s.position.x+=a.x,s.position.y+=a.y,s.angle+=a.angle)}},e.solveAll=function(r,t){for(var s=0;s<r.length;s+=1){var a=r[s],h=!a.bodyA||a.bodyA&&a.bodyA.isStatic,d=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(h||d)&&e.solve(r[s],t)}for(s=0;s<r.length;s+=1)a=r[s],h=!a.bodyA||a.bodyA&&a.bodyA.isStatic,d=!a.bodyB||a.bodyB&&a.bodyB.isStatic,!h&&!d&&e.solve(r[s],t)},e.solve=function(r,t){var s=r.bodyA,a=r.bodyB,h=r.pointA,d=r.pointB;if(!(!s&&!a)){s&&!s.isStatic&&(i.rotate(h,s.angle-r.angleA,h),r.angleA=s.angle),a&&!a.isStatic&&(i.rotate(d,a.angle-r.angleB,d),r.angleB=a.angle);var I=h,M=d;if(s&&(I=i.add(s.position,h)),a&&(M=i.add(a.position,d)),!(!I||!M)){var v=i.sub(I,M),p=i.magnitude(v);p<e._minLength&&(p=e._minLength);var x=(p-r.length)/p,g=r.stiffness<1?r.stiffness*t:r.stiffness,C=i.mult(v,x*g),P=(s?s.inverseMass:0)+(a?a.inverseMass:0),A=(s?s.inverseInertia:0)+(a?a.inverseInertia:0),w=P+A,E,B,R,L,F;if(r.damping){var O=i.create();R=i.div(v,p),F=i.sub(a&&i.sub(a.position,a.positionPrev)||O,s&&i.sub(s.position,s.positionPrev)||O),L=i.dot(R,F)}s&&!s.isStatic&&(B=s.inverseMass/P,s.constraintImpulse.x-=C.x*B,s.constraintImpulse.y-=C.y*B,s.position.x-=C.x*B,s.position.y-=C.y*B,r.damping&&(s.positionPrev.x-=r.damping*R.x*L*B,s.positionPrev.y-=r.damping*R.y*L*B),E=i.cross(h,C)/w*e._torqueDampen*s.inverseInertia*(1-r.angularStiffness),s.constraintImpulse.angle-=E,s.angle-=E),a&&!a.isStatic&&(B=a.inverseMass/P,a.constraintImpulse.x+=C.x*B,a.constraintImpulse.y+=C.y*B,a.position.x+=C.x*B,a.position.y+=C.y*B,r.damping&&(a.positionPrev.x+=r.damping*R.x*L*B,a.positionPrev.y+=r.damping*R.y*L*B),E=i.cross(d,C)/w*e._torqueDampen*a.inverseInertia*(1-r.angularStiffness),a.constraintImpulse.angle+=E,a.angle+=E)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var s=r[t],a=s.constraintImpulse;if(!(s.isStatic||a.x===0&&a.y===0&&a.angle===0)){n.set(s,!1);for(var h=0;h<s.parts.length;h++){var d=s.parts[h];o.translate(d.vertices,a),h>0&&(d.position.x+=a.x,d.position.y+=a.y),a.angle!==0&&(o.rotate(d.vertices,a.angle,s.position),l.rotate(d.axes,a.angle),h>0&&i.rotateAbout(d.position,a.angle,s.position,d.position)),c.update(d.bounds,d.vertices,s.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(m,T,f){var e={};m.exports=e;var o=f(2),i=f(0);(function(){e.fromVertices=function(n){for(var c={},l=0;l<n.length;l++){var u=(l+1)%n.length,r=o.normalise({x:n[u].y-n[l].y,y:n[l].x-n[u].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),c[t]=r}return i.values(c)},e.rotate=function(n,c){if(c!==0)for(var l=Math.cos(c),u=Math.sin(c),r=0;r<n.length;r++){var t=n[r],s;s=t.x*l-t.y*u,t.y=t.x*u+t.y*l,t.x=s}}})()},function(m,T,f){var e={};m.exports=e;var o=f(3),i=f(0),n=f(6),c=f(1),l=f(2);(function(){e.rectangle=function(u,r,t,s,a){a=a||{};var h={label:"Rectangle Body",position:{x:u,y:r},vertices:o.fromPath("L 0 0 L "+t+" 0 L "+t+" "+s+" L 0 "+s)};if(a.chamfer){var d=a.chamfer;h.vertices=o.chamfer(h.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete a.chamfer}return n.create(i.extend({},h,a))},e.trapezoid=function(u,r,t,s,a,h){h=h||{},a*=.5;var d=(1-a*2)*t,I=t*a,M=I+d,v=M+I,p;a<.5?p="L 0 0 L "+I+" "+-s+" L "+M+" "+-s+" L "+v+" 0":p="L 0 0 L "+M+" "+-s+" L "+v+" 0";var x={label:"Trapezoid Body",position:{x:u,y:r},vertices:o.fromPath(p)};if(h.chamfer){var g=h.chamfer;x.vertices=o.chamfer(x.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete h.chamfer}return n.create(i.extend({},x,h))},e.circle=function(u,r,t,s,a){s=s||{};var h={label:"Circle Body",circleRadius:t};a=a||25;var d=Math.ceil(Math.max(10,Math.min(a,t)));return d%2===1&&(d+=1),e.polygon(u,r,d,t,i.extend({},h,s))},e.polygon=function(u,r,t,s,a){if(a=a||{},t<3)return e.circle(u,r,s,a);for(var h=2*Math.PI/t,d="",I=h*.5,M=0;M<t;M+=1){var v=I+M*h,p=Math.cos(v)*s,x=Math.sin(v)*s;d+="L "+p.toFixed(3)+" "+x.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:u,y:r},vertices:o.fromPath(d)};if(a.chamfer){var C=a.chamfer;g.vertices=o.chamfer(g.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete a.chamfer}return n.create(i.extend({},g,a))},e.fromVertices=function(u,r,t,s,a,h,d,I){var M=i.getDecomp(),v,p,x,g,C,P,A,w,E,B,R;for(v=Boolean(M&&M.quickDecomp),s=s||{},x=[],a=typeof a<"u"?a:!1,h=typeof h<"u"?h:.01,d=typeof d<"u"?d:10,I=typeof I<"u"?I:.01,i.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(P=t[B],g=o.isConvex(P),C=!g,C&&!v&&i.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),g||!v)g?P=o.clockwiseSort(P):P=o.hull(P),x.push({position:{x:u,y:r},vertices:P});else{var L=P.map(function(N){return[N.x,N.y]});M.makeCCW(L),h!==!1&&M.removeCollinearPoints(L,h),I!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(L,I);var F=M.quickDecomp(L);for(A=0;A<F.length;A++){var O=F[A],D=O.map(function(N){return{x:N[0],y:N[1]}});d>0&&o.area(D)<d||x.push({position:o.centre(D),vertices:D})}}for(A=0;A<x.length;A++)x[A]=n.create(i.extend(x[A],s));if(a){var k=5;for(A=0;A<x.length;A++){var V=x[A];for(w=A+1;w<x.length;w++){var W=x[w];if(c.overlaps(V.bounds,W.bounds)){var U=V.vertices,H=W.vertices;for(E=0;E<V.vertices.length;E++)for(R=0;R<W.vertices.length;R++){var Z=l.magnitudeSquared(l.sub(U[(E+1)%U.length],H[R])),Q=l.magnitudeSquared(l.sub(U[E],H[(R+1)%H.length]));Z<k&&Q<k&&(U[E].isInternal=!0,H[R].isInternal=!0)}}}}}return x.length>1?(p=n.create(i.extend({parts:x.slice(0)},s)),n.setPosition(p,{x:u,y:r}),p):x[0]}})()},function(m,T,f){var e={};m.exports=e;var o=f(0);(function(){e.create=function(i){var n={};return i||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=i||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(c){var l=e._getRelativeMousePosition(c,n.element,n.pixelRatio),u=c.changedTouches;u&&(n.button=0,c.preventDefault()),n.absolute.x=l.x,n.absolute.y=l.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=c},n.mousedown=function(c){var l=e._getRelativeMousePosition(c,n.element,n.pixelRatio),u=c.changedTouches;u?(n.button=0,c.preventDefault()):n.button=c.button,n.absolute.x=l.x,n.absolute.y=l.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=c},n.mouseup=function(c){var l=e._getRelativeMousePosition(c,n.element,n.pixelRatio),u=c.changedTouches;u&&c.preventDefault(),n.button=-1,n.absolute.x=l.x,n.absolute.y=l.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=c},n.mousewheel=function(c){n.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(i,n){i.element=n,n.addEventListener("mousemove",i.mousemove),n.addEventListener("mousedown",i.mousedown),n.addEventListener("mouseup",i.mouseup),n.addEventListener("mousewheel",i.mousewheel),n.addEventListener("DOMMouseScroll",i.mousewheel),n.addEventListener("touchmove",i.mousemove),n.addEventListener("touchstart",i.mousedown),n.addEventListener("touchend",i.mouseup)},e.clearSourceEvents=function(i){i.sourceEvents.mousemove=null,i.sourceEvents.mousedown=null,i.sourceEvents.mouseup=null,i.sourceEvents.mousewheel=null,i.wheelDelta=0},e.setOffset=function(i,n){i.offset.x=n.x,i.offset.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e.setScale=function(i,n){i.scale.x=n.x,i.scale.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e._getRelativeMousePosition=function(i,n,c){var l=n.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,s=i.changedTouches,a,h;return s?(a=s[0].pageX-l.left-r,h=s[0].pageY-l.top-t):(a=i.pageX-l.left-r,h=i.pageY-l.top-t),{x:a/(n.clientWidth/(n.width||n.clientWidth)*c),y:h/(n.clientHeight/(n.height||n.clientHeight)*c)}}})()},function(m,T,f){var e={};m.exports=e;var o=f(0),i=f(8);(function(){e.create=function(n){var c={bodies:[],pairs:null};return o.extend(c,n)},e.setBodies=function(n,c){n.bodies=c.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var c=[],l=n.pairs,u=n.bodies,r=u.length,t=e.canCollide,s=i.collides,a,h;for(u.sort(e._compareBoundsX),a=0;a<r;a++){var d=u[a],I=d.bounds,M=d.bounds.max.x,v=d.bounds.max.y,p=d.bounds.min.y,x=d.isStatic||d.isSleeping,g=d.parts.length,C=g===1;for(h=a+1;h<r;h++){var P=u[h],A=P.bounds;if(A.min.x>M)break;if(!(v<A.min.y||p>A.max.y)&&!(x&&(P.isStatic||P.isSleeping))&&!!t(d.collisionFilter,P.collisionFilter)){var w=P.parts.length;if(C&&w===1){var E=s(d,P,l);E&&c.push(E)}else for(var B=g>1?1:0,R=w>1?1:0,L=B;L<g;L++)for(var F=d.parts[L],I=F.bounds,O=R;O<w;O++){var D=P.parts[O],A=D.bounds;if(!(I.min.x>A.max.x||I.max.x<A.min.x||I.max.y<A.min.y||I.min.y>A.max.y)){var E=s(F,D,l);E&&c.push(E)}}}}}return c},e.canCollide=function(n,c){return n.group===c.group&&n.group!==0?n.group>0:(n.mask&c.category)!==0&&(c.mask&n.category)!==0},e._compareBoundsX=function(n,c){return n.bounds.min.x-c.bounds.min.x}})()},function(m,T,f){var e={};m.exports=e;var o=f(0);(function(){e._registry={},e.register=function(i){if(e.isPlugin(i)||o.warn("Plugin.register:",e.toString(i),"does not implement all required fields."),i.name in e._registry){var n=e._registry[i.name],c=e.versionParse(i.version).number,l=e.versionParse(n.version).number;c>l?(o.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(i)),e._registry[i.name]=i):c<l?o.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(i)):i!==n&&o.warn("Plugin.register:",e.toString(i),"is already registered to different plugin object")}else e._registry[i.name]=i;return i},e.resolve=function(i){return e._registry[e.dependencyParse(i).name]},e.toString=function(i){return typeof i=="string"?i:(i.name||"anonymous")+"@"+(i.version||i.range||"0.0.0")},e.isPlugin=function(i){return i&&i.name&&i.version&&i.install},e.isUsed=function(i,n){return i.used.indexOf(n)>-1},e.isFor=function(i,n){var c=i.for&&e.dependencyParse(i.for);return!i.for||n.name===c.name&&e.versionSatisfies(n.version,c.range)},e.use=function(i,n){if(i.uses=(i.uses||[]).concat(n||[]),i.uses.length===0){o.warn("Plugin.use:",e.toString(i),"does not specify any dependencies to install.");return}for(var c=e.dependencies(i),l=o.topologicalSort(c),u=[],r=0;r<l.length;r+=1)if(l[r]!==i.name){var t=e.resolve(l[r]);if(!t){u.push("\u274C "+l[r]);continue}e.isUsed(i,t.name)||(e.isFor(t,i)||(o.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(i)+"."),t._warned=!0),t.install?t.install(i):(o.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1F536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),i.used.push(t.name))}u.length>0&&o.info(u.join("  "))},e.dependencies=function(i,n){var c=e.dependencyParse(i),l=c.name;if(n=n||{},!(l in n)){i=e.resolve(i)||i,n[l]=o.map(i.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),s=e.resolve(r);return s&&!e.versionSatisfies(s.version,t.range)?(o.warn("Plugin.dependencies:",e.toString(s),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),s._warned=!0,i._warned=!0):s||(o.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(c),"could not be resolved."),i._warned=!0),t.name});for(var u=0;u<n[l].length;u+=1)e.dependencies(n[l][u],n);return n}},e.dependencyParse=function(i){if(o.isString(i)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(i)||o.warn("Plugin.dependencyParse:",i,"is not a valid dependency string."),{name:i.split("@")[0],range:i.split("@")[1]||"*"}}return{name:i.name,range:i.range||i.version}},e.versionParse=function(i){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(i)||o.warn("Plugin.versionParse:",i,"is not a valid version or range.");var c=n.exec(i),l=Number(c[4]),u=Number(c[5]),r=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:i,operator:c[1]||c[2]||"",major:l,minor:u,patch:r,parts:[l,u,r],prerelease:c[7],number:l*1e8+u*1e4+r}},e.versionSatisfies=function(i,n){n=n||"*";var c=e.versionParse(n),l=e.versionParse(i);if(c.isRange){if(c.operator==="*"||i==="*")return!0;if(c.operator===">")return l.number>c.number;if(c.operator===">=")return l.number>=c.number;if(c.operator==="~")return l.major===c.major&&l.minor===c.minor&&l.patch>=c.patch;if(c.operator==="^")return c.major>0?l.major===c.major&&l.number>=c.number:c.minor>0?l.minor===c.minor&&l.patch>=c.patch:l.patch===c.patch}return i===n||i==="*"}})()},function(m,T,f){var e={};m.exports=e;var o=f(0),i=f(5),n=f(1),c=f(4),l=f(2),u=f(13);(function(){var r,t;typeof window<"u"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(v){var p={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=o.extend(p,v);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=v.mouse,x.engine=v.engine,x.canvas=x.canvas||h(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.options.showBroadphase=!1,x.options.pixelRatio!==1&&e.setPixelRatio(x,x.options.pixelRatio),o.isElement(x.element)?x.element.appendChild(x.canvas):x.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),x},e.run=function(v){(function p(x){v.frameRequestId=r(p),s(v,x),e.world(v,x),(v.options.showStats||v.options.showDebug)&&e.stats(v,v.context,x),(v.options.showPerformance||v.options.showDebug)&&e.performance(v,v.context,x)})()},e.stop=function(v){t(v.frameRequestId)},e.setPixelRatio=function(v,p){var x=v.options,g=v.canvas;p==="auto"&&(p=d(g)),x.pixelRatio=p,g.setAttribute("data-pixel-ratio",p),g.width=x.width*p,g.height=x.height*p,g.style.width=x.width+"px",g.style.height=x.height+"px"},e.lookAt=function(v,p,x,g){g=typeof g<"u"?g:!0,p=o.isArray(p)?p:[p],x=x||{x:0,y:0};for(var C={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},P=0;P<p.length;P+=1){var A=p[P],w=A.bounds?A.bounds.min:A.min||A.position||A,E=A.bounds?A.bounds.max:A.max||A.position||A;w&&E&&(w.x<C.min.x&&(C.min.x=w.x),E.x>C.max.x&&(C.max.x=E.x),w.y<C.min.y&&(C.min.y=w.y),E.y>C.max.y&&(C.max.y=E.y))}var B=C.max.x-C.min.x+2*x.x,R=C.max.y-C.min.y+2*x.y,L=v.canvas.height,F=v.canvas.width,O=F/L,D=B/R,k=1,V=1;D>O?V=D/O:k=O/D,v.options.hasBounds=!0,v.bounds.min.x=C.min.x,v.bounds.max.x=C.min.x+B*k,v.bounds.min.y=C.min.y,v.bounds.max.y=C.min.y+R*V,g&&(v.bounds.min.x+=B*.5-B*k*.5,v.bounds.max.x+=B*.5-B*k*.5,v.bounds.min.y+=R*.5-R*V*.5,v.bounds.max.y+=R*.5-R*V*.5),v.bounds.min.x-=x.x,v.bounds.max.x-=x.x,v.bounds.min.y-=x.y,v.bounds.max.y-=x.y,v.mouse&&(u.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),u.setOffset(v.mouse,v.bounds.min))},e.startViewTransform=function(v){var p=v.bounds.max.x-v.bounds.min.x,x=v.bounds.max.y-v.bounds.min.y,g=p/v.options.width,C=x/v.options.height;v.context.setTransform(v.options.pixelRatio/g,0,0,v.options.pixelRatio/C,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},e.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},e.world=function(v,p){var x=o.now(),g=v.engine,C=g.world,P=v.canvas,A=v.context,w=v.options,E=v.timing,B=i.allBodies(C),R=i.allConstraints(C),L=w.wireframes?w.wireframeBackground:w.background,F=[],O=[],D,k={timestamp:g.timing.timestamp};if(c.trigger(v,"beforeRender",k),v.currentBackground!==L&&M(v,L),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,P.width,P.height),A.globalCompositeOperation="source-over",w.hasBounds){for(D=0;D<B.length;D++){var V=B[D];n.overlaps(V.bounds,v.bounds)&&F.push(V)}for(D=0;D<R.length;D++){var W=R[D],U=W.bodyA,H=W.bodyB,Z=W.pointA,Q=W.pointB;U&&(Z=l.add(U.position,W.pointA)),H&&(Q=l.add(H.position,W.pointB)),!(!Z||!Q)&&(n.contains(v.bounds,Z)||n.contains(v.bounds,Q))&&O.push(W)}e.startViewTransform(v),v.mouse&&(u.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),u.setOffset(v.mouse,v.bounds.min))}else O=R,F=B,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!w.wireframes||g.enableSleeping&&w.showSleeping?e.bodies(v,F,A):(w.showConvexHulls&&e.bodyConvexHulls(v,F,A),e.bodyWireframes(v,F,A)),w.showBounds&&e.bodyBounds(v,F,A),(w.showAxes||w.showAngleIndicator)&&e.bodyAxes(v,F,A),w.showPositions&&e.bodyPositions(v,F,A),w.showVelocity&&e.bodyVelocity(v,F,A),w.showIds&&e.bodyIds(v,F,A),w.showSeparations&&e.separations(v,g.pairs.list,A),w.showCollisions&&e.collisions(v,g.pairs.list,A),w.showVertexNumbers&&e.vertexNumbers(v,F,A),w.showMousePosition&&e.mousePosition(v,v.mouse,A),e.constraints(O,A),w.hasBounds&&e.endViewTransform(v),c.trigger(v,"afterRender",k),E.lastElapsed=o.now()-x},e.stats=function(v,p,x){for(var g=v.engine,C=g.world,P=i.allBodies(C),A=0,w=55,E=44,B=0,R=0,L=0;L<P.length;L+=1)A+=P[L].parts.length;var F={Part:A,Body:P.length,Cons:i.allConstraints(C).length,Comp:i.allComposites(C).length,Pair:g.pairs.list.length};p.fillStyle="#0e0f19",p.fillRect(B,R,w*5.5,E),p.font="12px Arial",p.textBaseline="top",p.textAlign="right";for(var O in F){var D=F[O];p.fillStyle="#aaa",p.fillText(O,B+w,R+8),p.fillStyle="#eee",p.fillText(D,B+w,R+26),B+=w}},e.performance=function(v,p){var x=v.engine,g=v.timing,C=g.deltaHistory,P=g.elapsedHistory,A=g.timestampElapsedHistory,w=g.engineDeltaHistory,E=g.engineElapsedHistory,B=x.timing.lastDelta,R=a(C),L=a(P),F=a(w),O=a(E),D=a(A),k=D/R||0,V=1e3/R||0,W=4,U=12,H=60,Z=34,Q=10,N=69;p.fillStyle="#0e0f19",p.fillRect(0,50,U*4+H*5+22,Z),e.status(p,Q,N,H,W,C.length,Math.round(V)+" fps",V/e._goodFps,function($){return C[$]/R-1}),e.status(p,Q+U+H,N,H,W,w.length,B.toFixed(2)+" dt",e._goodDelta/B,function($){return w[$]/F-1}),e.status(p,Q+(U+H)*2,N,H,W,E.length,O.toFixed(2)+" ut",1-O/e._goodFps,function($){return E[$]/O-1}),e.status(p,Q+(U+H)*3,N,H,W,P.length,L.toFixed(2)+" rt",1-L/e._goodFps,function($){return P[$]/L-1}),e.status(p,Q+(U+H)*4,N,H,W,A.length,k.toFixed(2)+" x",k*k*k,function($){return(A[$]/C[$]/k||0)-1})},e.status=function(v,p,x,g,C,P,A,w,E){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(p,x+7,g,1),v.beginPath(),v.moveTo(p,x+7-C*o.clamp(.4*E(0),-2,2));for(var B=0;B<g;B+=1)v.lineTo(p+B,x+7-(B<P?C*o.clamp(.4*E(B),-2,2):0));v.stroke(),v.fillStyle="hsl("+o.clamp(25+95*w,0,120)+",100%,60%)",v.fillRect(p,x-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(A,p+g,x-5)},e.constraints=function(v,p){for(var x=p,g=0;g<v.length;g++){var C=v[g];if(!(!C.render.visible||!C.pointA||!C.pointB)){var P=C.bodyA,A=C.bodyB,w,E;if(P?w=l.add(P.position,C.pointA):w=C.pointA,C.render.type==="pin")x.beginPath(),x.arc(w.x,w.y,3,0,2*Math.PI),x.closePath();else{if(A?E=l.add(A.position,C.pointB):E=C.pointB,x.beginPath(),x.moveTo(w.x,w.y),C.render.type==="spring")for(var B=l.sub(E,w),R=l.perp(l.normalise(B)),L=Math.ceil(o.clamp(C.length/5,12,20)),F,O=1;O<L;O+=1)F=O%2===0?1:-1,x.lineTo(w.x+B.x*(O/L)+R.x*F*4,w.y+B.y*(O/L)+R.y*F*4);x.lineTo(E.x,E.y)}C.render.lineWidth&&(x.lineWidth=C.render.lineWidth,x.strokeStyle=C.render.strokeStyle,x.stroke()),C.render.anchors&&(x.fillStyle=C.render.strokeStyle,x.beginPath(),x.arc(w.x,w.y,3,0,2*Math.PI),x.arc(E.x,E.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},e.bodies=function(v,p,x){var g=x;v.engine;var C=v.options,P=C.showInternalEdges||!C.wireframes,A,w,E,B;for(E=0;E<p.length;E++)if(A=p[E],!!A.render.visible){for(B=A.parts.length>1?1:0;B<A.parts.length;B++)if(w=A.parts[B],!!w.render.visible){if(C.showSleeping&&A.isSleeping?g.globalAlpha=.5*w.render.opacity:w.render.opacity!==1&&(g.globalAlpha=w.render.opacity),w.render.sprite&&w.render.sprite.texture&&!C.wireframes){var R=w.render.sprite,L=I(v,R.texture);g.translate(w.position.x,w.position.y),g.rotate(w.angle),g.drawImage(L,L.width*-R.xOffset*R.xScale,L.height*-R.yOffset*R.yScale,L.width*R.xScale,L.height*R.yScale),g.rotate(-w.angle),g.translate(-w.position.x,-w.position.y)}else{if(w.circleRadius)g.beginPath(),g.arc(w.position.x,w.position.y,w.circleRadius,0,2*Math.PI);else{g.beginPath(),g.moveTo(w.vertices[0].x,w.vertices[0].y);for(var F=1;F<w.vertices.length;F++)!w.vertices[F-1].isInternal||P?g.lineTo(w.vertices[F].x,w.vertices[F].y):g.moveTo(w.vertices[F].x,w.vertices[F].y),w.vertices[F].isInternal&&!P&&g.moveTo(w.vertices[(F+1)%w.vertices.length].x,w.vertices[(F+1)%w.vertices.length].y);g.lineTo(w.vertices[0].x,w.vertices[0].y),g.closePath()}C.wireframes?(g.lineWidth=1,g.strokeStyle="#bbb",g.stroke()):(g.fillStyle=w.render.fillStyle,w.render.lineWidth&&(g.lineWidth=w.render.lineWidth,g.strokeStyle=w.render.strokeStyle,g.stroke()),g.fill())}g.globalAlpha=1}}},e.bodyWireframes=function(v,p,x){var g=x,C=v.options.showInternalEdges,P,A,w,E,B;for(g.beginPath(),w=0;w<p.length;w++)if(P=p[w],!!P.render.visible)for(B=P.parts.length>1?1:0;B<P.parts.length;B++){for(A=P.parts[B],g.moveTo(A.vertices[0].x,A.vertices[0].y),E=1;E<A.vertices.length;E++)!A.vertices[E-1].isInternal||C?g.lineTo(A.vertices[E].x,A.vertices[E].y):g.moveTo(A.vertices[E].x,A.vertices[E].y),A.vertices[E].isInternal&&!C&&g.moveTo(A.vertices[(E+1)%A.vertices.length].x,A.vertices[(E+1)%A.vertices.length].y);g.lineTo(A.vertices[0].x,A.vertices[0].y)}g.lineWidth=1,g.strokeStyle="#bbb",g.stroke()},e.bodyConvexHulls=function(v,p,x){var g=x,C,P,A;for(g.beginPath(),P=0;P<p.length;P++)if(C=p[P],!(!C.render.visible||C.parts.length===1)){for(g.moveTo(C.vertices[0].x,C.vertices[0].y),A=1;A<C.vertices.length;A++)g.lineTo(C.vertices[A].x,C.vertices[A].y);g.lineTo(C.vertices[0].x,C.vertices[0].y)}g.lineWidth=1,g.strokeStyle="rgba(255,255,255,0.2)",g.stroke()},e.vertexNumbers=function(v,p,x){var g=x,C,P,A;for(C=0;C<p.length;C++){var w=p[C].parts;for(A=w.length>1?1:0;A<w.length;A++){var E=w[A];for(P=0;P<E.vertices.length;P++)g.fillStyle="rgba(255,255,255,0.2)",g.fillText(C+"_"+P,E.position.x+(E.vertices[P].x-E.position.x)*.8,E.position.y+(E.vertices[P].y-E.position.y)*.8)}}},e.mousePosition=function(v,p,x){var g=x;g.fillStyle="rgba(255,255,255,0.8)",g.fillText(p.position.x+"  "+p.position.y,p.position.x+5,p.position.y-5)},e.bodyBounds=function(v,p,x){var g=x;v.engine;var C=v.options;g.beginPath();for(var P=0;P<p.length;P++){var A=p[P];if(A.render.visible)for(var w=p[P].parts,E=w.length>1?1:0;E<w.length;E++){var B=w[E];g.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}C.wireframes?g.strokeStyle="rgba(255,255,255,0.08)":g.strokeStyle="rgba(0,0,0,0.1)",g.lineWidth=1,g.stroke()},e.bodyAxes=function(v,p,x){var g=x;v.engine;var C=v.options,P,A,w,E;for(g.beginPath(),A=0;A<p.length;A++){var B=p[A],R=B.parts;if(!!B.render.visible)if(C.showAxes)for(w=R.length>1?1:0;w<R.length;w++)for(P=R[w],E=0;E<P.axes.length;E++){var L=P.axes[E];g.moveTo(P.position.x,P.position.y),g.lineTo(P.position.x+L.x*20,P.position.y+L.y*20)}else for(w=R.length>1?1:0;w<R.length;w++)for(P=R[w],E=0;E<P.axes.length;E++)g.moveTo(P.position.x,P.position.y),g.lineTo((P.vertices[0].x+P.vertices[P.vertices.length-1].x)/2,(P.vertices[0].y+P.vertices[P.vertices.length-1].y)/2)}C.wireframes?(g.strokeStyle="indianred",g.lineWidth=1):(g.strokeStyle="rgba(255, 255, 255, 0.4)",g.globalCompositeOperation="overlay",g.lineWidth=2),g.stroke(),g.globalCompositeOperation="source-over"},e.bodyPositions=function(v,p,x){var g=x;v.engine;var C=v.options,P,A,w,E;for(g.beginPath(),w=0;w<p.length;w++)if(P=p[w],!!P.render.visible)for(E=0;E<P.parts.length;E++)A=P.parts[E],g.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),g.closePath();for(C.wireframes?g.fillStyle="indianred":g.fillStyle="rgba(0,0,0,0.5)",g.fill(),g.beginPath(),w=0;w<p.length;w++)P=p[w],P.render.visible&&(g.arc(P.positionPrev.x,P.positionPrev.y,2,0,2*Math.PI,!1),g.closePath());g.fillStyle="rgba(255,165,0,0.8)",g.fill()},e.bodyVelocity=function(v,p,x){var g=x;g.beginPath();for(var C=0;C<p.length;C++){var P=p[C];!P.render.visible||(g.moveTo(P.position.x,P.position.y),g.lineTo(P.position.x+(P.position.x-P.positionPrev.x)*2,P.position.y+(P.position.y-P.positionPrev.y)*2))}g.lineWidth=3,g.strokeStyle="cornflowerblue",g.stroke()},e.bodyIds=function(v,p,x){var g=x,C,P;for(C=0;C<p.length;C++)if(!!p[C].render.visible){var A=p[C].parts;for(P=A.length>1?1:0;P<A.length;P++){var w=A[P];g.font="12px Arial",g.fillStyle="rgba(255,255,255,0.5)",g.fillText(w.id,w.position.x+10,w.position.y-10)}}},e.collisions=function(v,p,x){var g=x,C=v.options,P,A,w,E;for(g.beginPath(),w=0;w<p.length;w++)if(P=p[w],!!P.isActive)for(A=P.collision,E=0;E<P.activeContacts.length;E++){var B=P.activeContacts[E],R=B.vertex;g.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(C.wireframes?g.fillStyle="rgba(255,255,255,0.7)":g.fillStyle="orange",g.fill(),g.beginPath(),w=0;w<p.length;w++)if(P=p[w],!!P.isActive&&(A=P.collision,P.activeContacts.length>0)){var L=P.activeContacts[0].vertex.x,F=P.activeContacts[0].vertex.y;P.activeContacts.length===2&&(L=(P.activeContacts[0].vertex.x+P.activeContacts[1].vertex.x)/2,F=(P.activeContacts[0].vertex.y+P.activeContacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?g.moveTo(L-A.normal.x*8,F-A.normal.y*8):g.moveTo(L+A.normal.x*8,F+A.normal.y*8),g.lineTo(L,F)}C.wireframes?g.strokeStyle="rgba(255,165,0,0.7)":g.strokeStyle="orange",g.lineWidth=1,g.stroke()},e.separations=function(v,p,x){var g=x,C=v.options,P,A,w,E,B;for(g.beginPath(),B=0;B<p.length;B++)if(P=p[B],!!P.isActive){A=P.collision,w=A.bodyA,E=A.bodyB;var R=1;!E.isStatic&&!w.isStatic&&(R=.5),E.isStatic&&(R=0),g.moveTo(E.position.x,E.position.y),g.lineTo(E.position.x-A.penetration.x*R,E.position.y-A.penetration.y*R),R=1,!E.isStatic&&!w.isStatic&&(R=.5),w.isStatic&&(R=0),g.moveTo(w.position.x,w.position.y),g.lineTo(w.position.x+A.penetration.x*R,w.position.y+A.penetration.y*R)}C.wireframes?g.strokeStyle="rgba(255,165,0,0.5)":g.strokeStyle="orange",g.stroke()},e.inspector=function(v,p){v.engine;var x=v.selected,g=v.render,C=g.options,P;if(C.hasBounds){var A=g.bounds.max.x-g.bounds.min.x,w=g.bounds.max.y-g.bounds.min.y,E=A/g.options.width,B=w/g.options.height;p.scale(1/E,1/B),p.translate(-g.bounds.min.x,-g.bounds.min.y)}for(var R=0;R<x.length;R++){var L=x[R].data;switch(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.9)",p.setLineDash([1,2]),L.type){case"body":P=L.bounds,p.beginPath(),p.rect(Math.floor(P.min.x-3),Math.floor(P.min.y-3),Math.floor(P.max.x-P.min.x+6),Math.floor(P.max.y-P.min.y+6)),p.closePath(),p.stroke();break;case"constraint":var F=L.pointA;L.bodyA&&(F=L.pointB),p.beginPath(),p.arc(F.x,F.y,10,0,2*Math.PI),p.closePath(),p.stroke();break}p.setLineDash([]),p.translate(-.5,-.5)}v.selectStart!==null&&(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.6)",p.fillStyle="rgba(255,165,0,0.1)",P=v.selectBounds,p.beginPath(),p.rect(Math.floor(P.min.x),Math.floor(P.min.y),Math.floor(P.max.x-P.min.x),Math.floor(P.max.y-P.min.y)),p.closePath(),p.stroke(),p.fill(),p.translate(-.5,-.5)),C.hasBounds&&p.setTransform(1,0,0,1,0,0)};var s=function(v,p){var x=v.engine,g=v.timing,C=g.historySize,P=x.timing.timestamp;g.delta=p-g.lastTime||e._goodDelta,g.lastTime=p,g.timestampElapsed=P-g.lastTimestamp||0,g.lastTimestamp=P,g.deltaHistory.unshift(g.delta),g.deltaHistory.length=Math.min(g.deltaHistory.length,C),g.engineDeltaHistory.unshift(x.timing.lastDelta),g.engineDeltaHistory.length=Math.min(g.engineDeltaHistory.length,C),g.timestampElapsedHistory.unshift(g.timestampElapsed),g.timestampElapsedHistory.length=Math.min(g.timestampElapsedHistory.length,C),g.engineElapsedHistory.unshift(x.timing.lastElapsed),g.engineElapsedHistory.length=Math.min(g.engineElapsedHistory.length,C),g.elapsedHistory.unshift(g.lastElapsed),g.elapsedHistory.length=Math.min(g.elapsedHistory.length,C)},a=function(v){for(var p=0,x=0;x<v.length;x+=1)p+=v[x];return p/v.length||0},h=function(v,p){var x=document.createElement("canvas");return x.width=v,x.height=p,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},d=function(v){var p=v.getContext("2d"),x=window.devicePixelRatio||1,g=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return x/g},I=function(v,p){var x=v.textures[p];return x||(x=v.textures[p]=new Image,x.src=p,x)},M=function(v,p){var x=p;/(jpg|gif|png)$/.test(p)&&(x="url("+p+")"),v.canvas.style.background=x,v.canvas.style.backgroundSize="contain",v.currentBackground=p}})()},function(m,T){var f={};m.exports=f,function(){f.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(m,T,f){var e={};m.exports=e;var o=f(7),i=f(19),n=f(14),c=f(20),l=f(4),u=f(5),r=f(10),t=f(0),s=f(6);(function(){e.create=function(a){a=a||{};var h={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(h,a);return d.world=a.world||u.create({label:"World"}),d.pairs=a.pairs||c.create(),d.detector=a.detector||n.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(a,h,d){var I=t.now();h=h||1e3/60,d=d||1;var M=a.world,v=a.detector,p=a.pairs,x=a.timing,g=x.timestamp,C;x.timestamp+=h*x.timeScale,x.lastDelta=h*x.timeScale;var P={timestamp:x.timestamp};l.trigger(a,"beforeUpdate",P);var A=u.allBodies(M),w=u.allConstraints(M);for(M.isModified&&n.setBodies(v,A),M.isModified&&u.setModified(M,!1,!1,!0),a.enableSleeping&&o.update(A,x.timeScale),e._bodiesApplyGravity(A,a.gravity),e._bodiesUpdate(A,h,x.timeScale,d,M.bounds),r.preSolveAll(A),C=0;C<a.constraintIterations;C++)r.solveAll(w,x.timeScale);r.postSolveAll(A),v.pairs=a.pairs;var E=n.collisions(v);for(c.update(p,E,g),a.enableSleeping&&o.afterCollisions(p.list,x.timeScale),p.collisionStart.length>0&&l.trigger(a,"collisionStart",{pairs:p.collisionStart}),i.preSolvePosition(p.list),C=0;C<a.positionIterations;C++)i.solvePosition(p.list,x.timeScale);for(i.postSolvePosition(A),r.preSolveAll(A),C=0;C<a.constraintIterations;C++)r.solveAll(w,x.timeScale);for(r.postSolveAll(A),i.preSolveVelocity(p.list),C=0;C<a.velocityIterations;C++)i.solveVelocity(p.list,x.timeScale);return p.collisionActive.length>0&&l.trigger(a,"collisionActive",{pairs:p.collisionActive}),p.collisionEnd.length>0&&l.trigger(a,"collisionEnd",{pairs:p.collisionEnd}),e._bodiesClearForces(A),l.trigger(a,"afterUpdate",P),a.timing.lastElapsed=t.now()-I,a},e.merge=function(a,h){if(t.extend(a,h),h.world){a.world=h.world,e.clear(a);for(var d=u.allBodies(a.world),I=0;I<d.length;I++){var M=d[I];o.set(M,!1),M.id=t.nextId()}}},e.clear=function(a){c.clear(a.pairs),n.clear(a.detector)},e._bodiesClearForces=function(a){for(var h=0;h<a.length;h++){var d=a[h];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(a,h){var d=typeof h.scale<"u"?h.scale:.001;if(!(h.x===0&&h.y===0||d===0))for(var I=0;I<a.length;I++){var M=a[I];M.isStatic||M.isSleeping||(M.force.y+=M.mass*h.y*d,M.force.x+=M.mass*h.x*d)}},e._bodiesUpdate=function(a,h,d,I,M){for(var v=0;v<a.length;v++){var p=a[v];p.isStatic||p.isSleeping||s.update(p,h,d,I)}}})()},function(m,T,f){var e={};m.exports=e;var o=f(3),i=f(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var c,l,u,r=n.length;for(c=0;c<r;c++)l=n[c],l.isActive&&(u=l.activeContacts.length,l.collision.parentA.totalContacts+=u,l.collision.parentB.totalContacts+=u)},e.solvePosition=function(n,c){var l,u,r,t,s,a,h,d,I=e._positionDampen,M=n.length;for(l=0;l<M;l++)u=n[l],!(!u.isActive||u.isSensor)&&(r=u.collision,t=r.parentA,s=r.parentB,a=r.normal,u.separation=a.x*(s.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+a.y*(s.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(l=0;l<M;l++)u=n[l],!(!u.isActive||u.isSensor)&&(r=u.collision,t=r.parentA,s=r.parentB,a=r.normal,d=(u.separation-u.slop)*c,(t.isStatic||s.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(h=I/t.totalContacts,t.positionImpulse.x+=a.x*d*h,t.positionImpulse.y+=a.y*d*h),s.isStatic||s.isSleeping||(h=I/s.totalContacts,s.positionImpulse.x-=a.x*d*h,s.positionImpulse.y-=a.y*d*h))},e.postSolvePosition=function(n){for(var c=e._positionWarming,l=n.length,u=o.translate,r=i.update,t=0;t<l;t++){var s=n[t],a=s.positionImpulse,h=a.x,d=a.y,I=s.velocity;if(s.totalContacts=0,h!==0||d!==0){for(var M=0;M<s.parts.length;M++){var v=s.parts[M];u(v.vertices,a),r(v.bounds,v.vertices,I),v.position.x+=h,v.position.y+=d}s.positionPrev.x+=h,s.positionPrev.y+=d,h*I.x+d*I.y<0?(a.x=0,a.y=0):(a.x*=c,a.y*=c)}}},e.preSolveVelocity=function(n){var c=n.length,l,u;for(l=0;l<c;l++){var r=n[l];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,s=t.length,a=r.collision,h=a.parentA,d=a.parentB,I=a.normal,M=a.tangent;for(u=0;u<s;u++){var v=t[u],p=v.vertex,x=v.normalImpulse,g=v.tangentImpulse;if(x!==0||g!==0){var C=I.x*x+M.x*g,P=I.y*x+M.y*g;h.isStatic||h.isSleeping||(h.positionPrev.x+=C*h.inverseMass,h.positionPrev.y+=P*h.inverseMass,h.anglePrev+=h.inverseInertia*((p.x-h.position.x)*P-(p.y-h.position.y)*C)),d.isStatic||d.isSleeping||(d.positionPrev.x-=C*d.inverseMass,d.positionPrev.y-=P*d.inverseMass,d.anglePrev-=d.inverseInertia*((p.x-d.position.x)*P-(p.y-d.position.y)*C))}}}}},e.solveVelocity=function(n,c){var l=c*c,u=e._restingThresh*l,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*l,s=Number.MAX_VALUE,a=n.length,h,d,I,M;for(I=0;I<a;I++){var v=n[I];if(!(!v.isActive||v.isSensor)){var p=v.collision,x=p.parentA,g=p.parentB,C=x.velocity,P=g.velocity,A=p.normal.x,w=p.normal.y,E=p.tangent.x,B=p.tangent.y,R=v.activeContacts,L=R.length,F=1/L,O=x.inverseMass+g.inverseMass,D=v.friction*v.frictionStatic*r*l;for(C.x=x.position.x-x.positionPrev.x,C.y=x.position.y-x.positionPrev.y,P.x=g.position.x-g.positionPrev.x,P.y=g.position.y-g.positionPrev.y,x.angularVelocity=x.angle-x.anglePrev,g.angularVelocity=g.angle-g.anglePrev,M=0;M<L;M++){var k=R[M],V=k.vertex,W=V.x-x.position.x,U=V.y-x.position.y,H=V.x-g.position.x,Z=V.y-g.position.y,Q=C.x-U*x.angularVelocity,N=C.y+W*x.angularVelocity,$=P.x-Z*g.angularVelocity,$e=P.y+H*g.angularVelocity,we=Q-$,Pe=N-$e,_=A*we+w*Pe,K=E*we+B*Pe,Ce=v.separation+_,le=Math.min(Ce,1);le=Ce<0?0:le;var Me=le*D;K>Me||-K>Me?(d=K>0?K:-K,h=v.friction*(K>0?1:-1)*l,h<-d?h=-d:h>d&&(h=d)):(h=K,d=s);var Ie=W*w-U*A,Ae=H*w-Z*A,Te=F/(O+x.inverseInertia*Ie*Ie+g.inverseInertia*Ae*Ae),ie=(1+v.restitution)*_*Te;if(h*=Te,_*_>u&&_<0)k.normalImpulse=0;else{var Ze=k.normalImpulse;k.normalImpulse+=ie,k.normalImpulse=Math.min(k.normalImpulse,0),ie=k.normalImpulse-Ze}if(K*K>t)k.tangentImpulse=0;else{var Ke=k.tangentImpulse;k.tangentImpulse+=h,k.tangentImpulse<-d&&(k.tangentImpulse=-d),k.tangentImpulse>d&&(k.tangentImpulse=d),h=k.tangentImpulse-Ke}var re=A*ie+E*h,oe=w*ie+B*h;x.isStatic||x.isSleeping||(x.positionPrev.x+=re*x.inverseMass,x.positionPrev.y+=oe*x.inverseMass,x.anglePrev+=(W*oe-U*re)*x.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=re*g.inverseMass,g.positionPrev.y-=oe*g.inverseMass,g.anglePrev-=(H*oe-Z*re)*g.inverseInertia)}}}}})()},function(m,T,f){var e={};m.exports=e;var o=f(9),i=f(0);(function(){e.create=function(n){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,c,l){var u=n.list,r=u.length,t=n.table,s=c.length,a=n.collisionStart,h=n.collisionEnd,d=n.collisionActive,I,M,v,p;for(a.length=0,h.length=0,d.length=0,p=0;p<r;p++)u[p].confirmedActive=!1;for(p=0;p<s;p++)I=c[p],v=I.pair,v?(v.isActive?d.push(v):a.push(v),o.update(v,I,l),v.confirmedActive=!0):(v=o.create(I,l),t[v.id]=v,a.push(v),u.push(v));var x=[];for(r=u.length,p=0;p<r;p++)v=u[p],v.confirmedActive||(o.setActive(v,!1,l),h.push(v),!v.collision.bodyA.isSleeping&&!v.collision.bodyB.isSleeping&&x.push(p));for(p=0;p<x.length;p++)M=x[p]-p,v=u[M],u.splice(M,1),delete t[v.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(m,T,f){var e=m.exports=f(22);e.Axes=f(11),e.Bodies=f(12),e.Body=f(6),e.Bounds=f(1),e.Collision=f(8),e.Common=f(0),e.Composite=f(5),e.Composites=f(23),e.Constraint=f(10),e.Contact=f(17),e.Detector=f(14),e.Engine=f(18),e.Events=f(4),e.Grid=f(24),e.Mouse=f(13),e.MouseConstraint=f(25),e.Pair=f(9),e.Pairs=f(20),e.Plugin=f(15),e.Query=f(26),e.Render=f(16),e.Resolver=f(19),e.Runner=f(27),e.SAT=f(28),e.Sleeping=f(7),e.Svg=f(29),e.Vector=f(2),e.Vertices=f(3),e.World=f(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(m,T,f){var e={};m.exports=e;var o=f(15),i=f(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){o.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,c){return n=n.replace(/^Matter./,""),i.chainPathBefore(e,n,c)},e.after=function(n,c){return n=n.replace(/^Matter./,""),i.chainPathAfter(e,n,c)}})()},function(m,T,f){var e={};m.exports=e;var o=f(5),i=f(10),n=f(0),c=f(6),l=f(12),u=n.deprecated;(function(){e.stack=function(r,t,s,a,h,d,I){for(var M=o.create({label:"Stack"}),v=r,p=t,x,g=0,C=0;C<a;C++){for(var P=0,A=0;A<s;A++){var w=I(v,p,A,C,x,g);if(w){var E=w.bounds.max.y-w.bounds.min.y,B=w.bounds.max.x-w.bounds.min.x;E>P&&(P=E),c.translate(w,{x:B*.5,y:E*.5}),v=w.bounds.max.x+h,o.addBody(M,w),x=w,g+=1}else v+=h}p+=P+d,v=r}return M},e.chain=function(r,t,s,a,h,d){for(var I=r.bodies,M=1;M<I.length;M++){var v=I[M-1],p=I[M],x=v.bounds.max.y-v.bounds.min.y,g=v.bounds.max.x-v.bounds.min.x,C=p.bounds.max.y-p.bounds.min.y,P=p.bounds.max.x-p.bounds.min.x,A={bodyA:v,pointA:{x:g*t,y:x*s},bodyB:p,pointB:{x:P*a,y:C*h}},w=n.extend(A,d);o.addConstraint(r,i.create(w))}return r.label+=" Chain",r},e.mesh=function(r,t,s,a,h){var d=r.bodies,I,M,v,p,x;for(I=0;I<s;I++){for(M=1;M<t;M++)v=d[M-1+I*t],p=d[M+I*t],o.addConstraint(r,i.create(n.extend({bodyA:v,bodyB:p},h)));if(I>0)for(M=0;M<t;M++)v=d[M+(I-1)*t],p=d[M+I*t],o.addConstraint(r,i.create(n.extend({bodyA:v,bodyB:p},h))),a&&M>0&&(x=d[M-1+(I-1)*t],o.addConstraint(r,i.create(n.extend({bodyA:x,bodyB:p},h)))),a&&M<t-1&&(x=d[M+1+(I-1)*t],o.addConstraint(r,i.create(n.extend({bodyA:x,bodyB:p},h))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,s,a,h,d,I){return e.stack(r,t,s,a,h,d,function(M,v,p,x,g,C){var P=Math.min(a,Math.ceil(s/2)),A=g?g.bounds.max.x-g.bounds.min.x:0;if(!(x>P)){x=P-x;var w=x,E=s-1-x;if(!(p<w||p>E)){C===1&&c.translate(g,{x:(p+(s%2===1?1:-1))*A,y:0});var B=g?p*A:0;return I(r+B+p*h,v,p,x,g,C)}}})},e.newtonsCradle=function(r,t,s,a,h){for(var d=o.create({label:"Newtons Cradle"}),I=0;I<s;I++){var M=1.9,v=l.circle(r+I*(a*M),t+h,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),p=i.create({pointA:{x:r+I*(a*M),y:t},bodyB:v});o.addBody(d,v),o.addConstraint(d,p)}return d},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,s,a,h){var d=c.nextGroup(!0),I=20,M=-s*.5+I,v=s*.5-I,p=0,x=o.create({label:"Car"}),g=l.rectangle(r,t,s,a,{collisionFilter:{group:d},chamfer:{radius:a*.5},density:2e-4}),C=l.circle(r+M,t+p,h,{collisionFilter:{group:d},friction:.8}),P=l.circle(r+v,t+p,h,{collisionFilter:{group:d},friction:.8}),A=i.create({bodyB:g,pointB:{x:M,y:p},bodyA:C,stiffness:1,length:0}),w=i.create({bodyB:g,pointB:{x:v,y:p},bodyA:P,stiffness:1,length:0});return o.addBody(x,g),o.addBody(x,C),o.addBody(x,P),o.addConstraint(x,A),o.addConstraint(x,w),x},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,s,a,h,d,I,M,v,p){v=n.extend({inertia:1/0},v),p=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var x=e.stack(r,t,s,a,h,d,function(g,C){return l.circle(g,C,M,v)});return e.mesh(x,s,a,I,p),x.label="Soft Body",x},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(m,T,f){var e={};m.exports=e;var o=f(9),i=f(0),n=i.deprecated;(function(){e.create=function(c){var l={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return i.extend(l,c)},e.update=function(c,l,u,r){var t,s,a,h=u.world,d=c.buckets,I,M,v=!1;for(t=0;t<l.length;t++){var p=l[t];if(!(p.isSleeping&&!r)&&!(h.bounds&&(p.bounds.max.x<h.bounds.min.x||p.bounds.min.x>h.bounds.max.x||p.bounds.max.y<h.bounds.min.y||p.bounds.min.y>h.bounds.max.y))){var x=e._getRegion(c,p);if(!p.region||x.id!==p.region.id||r){(!p.region||r)&&(p.region=x);var g=e._regionUnion(x,p.region);for(s=g.startCol;s<=g.endCol;s++)for(a=g.startRow;a<=g.endRow;a++){M=e._getBucketId(s,a),I=d[M];var C=s>=x.startCol&&s<=x.endCol&&a>=x.startRow&&a<=x.endRow,P=s>=p.region.startCol&&s<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!C&&P&&P&&I&&e._bucketRemoveBody(c,I,p),(p.region===x||C&&!P||r)&&(I||(I=e._createBucket(d,M)),e._bucketAddBody(c,I,p))}p.region=x,v=!0}}}v&&(c.pairsList=e._createActivePairsList(c))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,l){var u=Math.min(c.startCol,l.startCol),r=Math.max(c.endCol,l.endCol),t=Math.min(c.startRow,l.startRow),s=Math.max(c.endRow,l.endRow);return e._createRegion(u,r,t,s)},e._getRegion=function(c,l){var u=l.bounds,r=Math.floor(u.min.x/c.bucketWidth),t=Math.floor(u.max.x/c.bucketWidth),s=Math.floor(u.min.y/c.bucketHeight),a=Math.floor(u.max.y/c.bucketHeight);return e._createRegion(r,t,s,a)},e._createRegion=function(c,l,u,r){return{id:c+","+l+","+u+","+r,startCol:c,endCol:l,startRow:u,endRow:r}},e._getBucketId=function(c,l){return"C"+c+"R"+l},e._createBucket=function(c,l){var u=c[l]=[];return u},e._bucketAddBody=function(c,l,u){var r=c.pairs,t=o.id,s=l.length,a;for(a=0;a<s;a++){var h=l[a];if(!(u.id===h.id||u.isStatic&&h.isStatic)){var d=t(u,h),I=r[d];I?I[2]+=1:r[d]=[u,h,1]}}l.push(u)},e._bucketRemoveBody=function(c,l,u){var r=c.pairs,t=o.id,s;l.splice(i.indexOf(l,u),1);var a=l.length;for(s=0;s<a;s++){var h=r[t(u,l[s])];h&&(h[2]-=1)}},e._createActivePairsList=function(c){var l,u=c.pairs,r=i.keys(u),t=r.length,s=[],a;for(a=0;a<t;a++)l=u[r[a]],l[2]>0?s.push(l):delete u[r[a]];return s}})()},function(m,T,f){var e={};m.exports=e;var o=f(3),i=f(7),n=f(13),c=f(4),l=f(14),u=f(10),r=f(5),t=f(0),s=f(1);(function(){e.create=function(a,h){var d=(a?a.mouse:null)||(h?h.mouse:null);d||(a&&a.render&&a.render.canvas?d=n.create(a.render.canvas):h&&h.element?d=n.create(h.element):(d=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var I=u.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),M={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:I,collisionFilter:{category:1,mask:4294967295,group:0}},v=t.extend(M,h);return c.on(a,"beforeUpdate",function(){var p=r.allBodies(a.world);e.update(v,p),e._triggerEvents(v)}),v},e.update=function(a,h){var d=a.mouse,I=a.constraint,M=a.body;if(d.button===0){if(I.bodyB)i.set(I.bodyB,!1),I.pointA=d.position;else for(var v=0;v<h.length;v++)if(M=h[v],s.contains(M.bounds,d.position)&&l.canCollide(M.collisionFilter,a.collisionFilter))for(var p=M.parts.length>1?1:0;p<M.parts.length;p++){var x=M.parts[p];if(o.contains(x.vertices,d.position)){I.pointA=d.position,I.bodyB=a.body=M,I.pointB={x:d.position.x-M.position.x,y:d.position.y-M.position.y},I.angleB=M.angle,i.set(M,!1),c.trigger(a,"startdrag",{mouse:d,body:M});break}}}else I.bodyB=a.body=null,I.pointB=null,M&&c.trigger(a,"enddrag",{mouse:d,body:M})},e._triggerEvents=function(a){var h=a.mouse,d=h.sourceEvents;d.mousemove&&c.trigger(a,"mousemove",{mouse:h}),d.mousedown&&c.trigger(a,"mousedown",{mouse:h}),d.mouseup&&c.trigger(a,"mouseup",{mouse:h}),n.clearSourceEvents(h)}})()},function(m,T,f){var e={};m.exports=e;var o=f(2),i=f(8),n=f(1),c=f(12),l=f(3);(function(){e.collides=function(u,r){for(var t=[],s=r.length,a=u.bounds,h=i.collides,d=n.overlaps,I=0;I<s;I++){var M=r[I],v=M.parts.length,p=v===1?0:1;if(d(M.bounds,a))for(var x=p;x<v;x++){var g=M.parts[x];if(d(g.bounds,a)){var C=h(g,u);if(C){t.push(C);break}}}}return t},e.ray=function(u,r,t,s){s=s||1e-100;for(var a=o.angle(r,t),h=o.magnitude(o.sub(r,t)),d=(t.x+r.x)*.5,I=(t.y+r.y)*.5,M=c.rectangle(d,I,h,s,{angle:a}),v=e.collides(M,u),p=0;p<v.length;p+=1){var x=v[p];x.body=x.bodyB=x.bodyA}return v},e.region=function(u,r,t){for(var s=[],a=0;a<u.length;a++){var h=u[a],d=n.overlaps(h.bounds,r);(d&&!t||!d&&t)&&s.push(h)}return s},e.point=function(u,r){for(var t=[],s=0;s<u.length;s++){var a=u[s];if(n.contains(a.bounds,r))for(var h=a.parts.length===1?0:1;h<a.parts.length;h++){var d=a.parts[h];if(n.contains(d.bounds,r)&&l.contains(d.vertices,r)){t.push(a);break}}}return t}})()},function(m,T,f){var e={};m.exports=e;var o=f(4),i=f(18),n=f(0);(function(){var c,l;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var u;c=function(r){u=setTimeout(function(){r(n.now())},1e3/60)},l=function(){clearTimeout(u)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},s=n.extend(t,r);return s.delta=s.delta||1e3/s.fps,s.deltaMin=s.deltaMin||1e3/s.fps,s.deltaMax=s.deltaMax||1e3/(s.fps*.5),s.fps=1e3/s.delta,s},e.run=function(r,t){return typeof r.positionIterations<"u"&&(t=r,r=e.create()),function s(a){r.frameRequestId=c(s),a&&r.enabled&&e.tick(r,t,a)}(),r},e.tick=function(r,t,s){var a=t.timing,h=1,d,I={timestamp:a.timestamp};o.trigger(r,"beforeTick",I),r.isFixed?d=r.delta:(d=s-r.timePrev||r.delta,r.timePrev=s,r.deltaHistory.push(d),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),d=Math.min.apply(null,r.deltaHistory),d=d<r.deltaMin?r.deltaMin:d,d=d>r.deltaMax?r.deltaMax:d,h=d/r.delta,r.delta=d),r.timeScalePrev!==0&&(h*=a.timeScale/r.timeScalePrev),a.timeScale===0&&(h=0),r.timeScalePrev=a.timeScale,r.correction=h,r.frameCounter+=1,s-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((s-r.counterTimestamp)/1e3),r.counterTimestamp=s,r.frameCounter=0),o.trigger(r,"tick",I),o.trigger(r,"beforeUpdate",I),i.update(t,d,h),o.trigger(r,"afterUpdate",I),o.trigger(r,"afterTick",I)},e.stop=function(r){l(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(m,T,f){var e={};m.exports=e;var o=f(8),i=f(0),n=i.deprecated;(function(){e.collides=function(c,l){return o.collides(c,l)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(m,T,f){var e={};m.exports=e,f(1);var o=f(0);(function(){e.pathToVertices=function(i,n){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,l,u,r,t,s,a,h,d,I,M=[],v,p,x=0,g=0,C=0;n=n||15;var P=function(w,E,B){var R=B%2===1&&B>1;if(!d||w!=d.x||E!=d.y){d&&R?(v=d.x,p=d.y):(v=0,p=0);var L={x:v+w,y:p+E};(R||!d)&&(d=L),M.push(L),g=v+w,C=p+E}},A=function(w){var E=w.pathSegTypeAsLetter.toUpperCase();if(E!=="Z"){switch(E){case"M":case"L":case"T":case"C":case"S":case"Q":g=w.x,C=w.y;break;case"H":g=w.x;break;case"V":C=w.y;break}P(g,C,w.pathSegType)}};for(e._svgPathToAbsolute(i),u=i.getTotalLength(),s=[],c=0;c<i.pathSegList.numberOfItems;c+=1)s.push(i.pathSegList.getItem(c));for(a=s.concat();x<u;){if(I=i.getPathSegAtLength(x),t=s[I],t!=h){for(;a.length&&a[0]!=t;)A(a.shift());h=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=i.getPointAtLength(x),P(r.x,r.y,0);break}x+=n}for(c=0,l=a.length;c<l;++c)A(a[c]);return M},e._svgPathToAbsolute=function(i){for(var n,c,l,u,r,t,s=i.pathSegList,a=0,h=0,d=s.numberOfItems,I=0;I<d;++I){var M=s.getItem(I),v=M.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in M&&(a=M.x),"y"in M&&(h=M.y);else switch("x1"in M&&(l=a+M.x1),"x2"in M&&(r=a+M.x2),"y1"in M&&(u=h+M.y1),"y2"in M&&(t=h+M.y2),"x"in M&&(a+=M.x),"y"in M&&(h+=M.y),v){case"m":s.replaceItem(i.createSVGPathSegMovetoAbs(a,h),I);break;case"l":s.replaceItem(i.createSVGPathSegLinetoAbs(a,h),I);break;case"h":s.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(a),I);break;case"v":s.replaceItem(i.createSVGPathSegLinetoVerticalAbs(h),I);break;case"c":s.replaceItem(i.createSVGPathSegCurvetoCubicAbs(a,h,l,u,r,t),I);break;case"s":s.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(a,h,r,t),I);break;case"q":s.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(a,h,l,u),I);break;case"t":s.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(a,h),I);break;case"a":s.replaceItem(i.createSVGPathSegArcAbs(a,h,M.r1,M.r2,M.angle,M.largeArcFlag,M.sweepFlag),I);break;case"z":case"Z":a=n,h=c;break}(v=="M"||v=="m")&&(n=a,c=h)}}})()},function(m,T,f){var e={};m.exports=e;var o=f(5);f(0),function(){e.create=o.create,e.add=o.add,e.remove=o.remove,e.clear=o.clear,e.addComposite=o.addComposite,e.addBody=o.addBody,e.addConstraint=o.addConstraint}()}])})})(b);var ve=function(y,S){return ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,T){m.__proto__=T}||function(m,T){for(var f in T)Object.prototype.hasOwnProperty.call(T,f)&&(m[f]=T[f])},ve(y,S)};function ge(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");ve(y,S);function m(){this.constructor=y}y.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)}function Ye(y,S,m,T){function f(e){return e instanceof m?e:new m(function(o){o(e)})}return new(m||(m=Promise))(function(e,o){function i(l){try{c(T.next(l))}catch(u){o(u)}}function n(l){try{c(T.throw(l))}catch(u){o(u)}}function c(l){l.done?e(l.value):f(l.value).then(i,n)}c((T=T.apply(y,S||[])).next())})}function Fe(y,S){var m={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},T,f,e,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(c){return function(l){return n([c,l])}}function n(c){if(T)throw new TypeError("Generator is already executing.");for(;m;)try{if(T=1,f&&(e=c[0]&2?f.return:c[0]?f.throw||((e=f.return)&&e.call(f),0):f.next)&&!(e=e.call(f,c[1])).done)return e;switch(f=0,e&&(c=[c[0]&2,e.value]),c[0]){case 0:case 1:e=c;break;case 4:return m.label++,{value:c[1],done:!1};case 5:m.label++,f=c[1],c=[0];continue;case 7:c=m.ops.pop(),m.trys.pop();continue;default:if(e=m.trys,!(e=e.length>0&&e[e.length-1])&&(c[0]===6||c[0]===2)){m=0;continue}if(c[0]===3&&(!e||c[1]>e[0]&&c[1]<e[3])){m.label=c[1];break}if(c[0]===6&&m.label<e[1]){m.label=e[1],e=c;break}if(e&&m.label<e[2]){m.label=e[2],m.ops.push(c);break}e[2]&&m.ops.pop(),m.trys.pop();continue}c=S.call(y,m)}catch(l){c=[6,l],f=0}finally{T=e=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ee(y){var S=typeof Symbol=="function"&&Symbol.iterator,m=S&&y[S],T=0;if(m)return m.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&T>=y.length&&(y=void 0),{value:y&&y[T++],done:!y}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(y,S){var m=typeof Symbol=="function"&&y[Symbol.iterator];if(!m)return y;var T=m.call(y),f,e=[],o;try{for(;(S===void 0||S-- >0)&&!(f=T.next()).done;)e.push(f.value)}catch(i){o={error:i}}finally{try{f&&!f.done&&(m=T.return)&&m.call(T)}finally{if(o)throw o.error}}return e}function ne(y,S,m){if(m||arguments.length===2)for(var T=0,f=S.length,e;T<f;T++)(e||!(T in S))&&(e||(e=Array.prototype.slice.call(S,0,T)),e[T]=S[T]);return y.concat(e||Array.prototype.slice.call(S))}function j(y){return this instanceof j?(this.v=y,this):new j(y)}function Xe(y,S,m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T=m.apply(y,S||[]),f,e=[];return f={},o("next"),o("throw"),o("return"),f[Symbol.asyncIterator]=function(){return this},f;function o(r){T[r]&&(f[r]=function(t){return new Promise(function(s,a){e.push([r,t,s,a])>1||i(r,t)})})}function i(r,t){try{n(T[r](t))}catch(s){u(e[0][3],s)}}function n(r){r.value instanceof j?Promise.resolve(r.value.v).then(c,l):u(e[0][2],r)}function c(r){i("next",r)}function l(r){i("throw",r)}function u(r,t){r(t),e.shift(),e.length&&i(e[0][0],e[0][1])}}function je(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=y[Symbol.asyncIterator],m;return S?S.call(y):(y=typeof ee=="function"?ee(y):y[Symbol.iterator](),m={},T("next"),T("throw"),T("return"),m[Symbol.asyncIterator]=function(){return this},m);function T(e){m[e]=y[e]&&function(o){return new Promise(function(i,n){o=y[e](o),f(i,n,o.done,o.value)})}}function f(e,o,i,n){Promise.resolve(n).then(function(c){e({value:c,done:i})},o)}}function G(y){return typeof y=="function"}function Oe(y){var S=function(T){Error.call(T),T.stack=new Error().stack},m=y(S);return m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m}var ue=Oe(function(y){return function(m){y(this),this.message=m?m.length+` errors occurred during unsubscription:
`+m.map(function(T,f){return f+1+") "+T.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=m}});function Ee(y,S){if(y){var m=y.indexOf(S);0<=m&&y.splice(m,1)}}var de=function(){function y(S){this.initialTeardown=S,this.closed=!1,this._parentage=null,this._finalizers=null}return y.prototype.unsubscribe=function(){var S,m,T,f,e;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var i=ee(o),n=i.next();!n.done;n=i.next()){var c=n.value;c.remove(this)}}catch(a){S={error:a}}finally{try{n&&!n.done&&(m=i.return)&&m.call(i)}finally{if(S)throw S.error}}else o.remove(this);var l=this.initialTeardown;if(G(l))try{l()}catch(a){e=a instanceof ue?a.errors:[a]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var r=ee(u),t=r.next();!t.done;t=r.next()){var s=t.value;try{Be(s)}catch(a){e=e!=null?e:[],a instanceof ue?e=ne(ne([],te(e)),te(a.errors)):e.push(a)}}}catch(a){T={error:a}}finally{try{t&&!t.done&&(f=r.return)&&f.call(r)}finally{if(T)throw T.error}}}if(e)throw new ue(e)}},y.prototype.add=function(S){var m;if(S&&S!==this)if(this.closed)Be(S);else{if(S instanceof y){if(S.closed||S._hasParent(this))return;S._addParent(this)}(this._finalizers=(m=this._finalizers)!==null&&m!==void 0?m:[]).push(S)}},y.prototype._hasParent=function(S){var m=this._parentage;return m===S||Array.isArray(m)&&m.includes(S)},y.prototype._addParent=function(S){var m=this._parentage;this._parentage=Array.isArray(m)?(m.push(S),m):m?[m,S]:S},y.prototype._removeParent=function(S){var m=this._parentage;m===S?this._parentage=null:Array.isArray(m)&&Ee(m,S)},y.prototype.remove=function(S){var m=this._finalizers;m&&Ee(m,S),S instanceof y&&S._removeParent(this)},y.EMPTY=function(){var S=new y;return S.closed=!0,S}(),y}();de.EMPTY;function ke(y){return y instanceof de||y&&"closed"in y&&G(y.remove)&&G(y.add)&&G(y.unsubscribe)}function Be(y){G(y)?y():y.unsubscribe()}var De={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},he={setTimeout:function(y,S){for(var m=[],T=2;T<arguments.length;T++)m[T-2]=arguments[T];var f=he.delegate;return f!=null&&f.setTimeout?f.setTimeout.apply(f,ne([y,S],te(m))):setTimeout.apply(void 0,ne([y,S],te(m)))},clearTimeout:function(y){var S=he.delegate;return((S==null?void 0:S.clearTimeout)||clearTimeout)(y)},delegate:void 0};function Ve(y){he.setTimeout(function(){throw y})}function Re(){}function qe(y){y()}var me=function(y){ge(S,y);function S(m){var T=y.call(this)||this;return T.isStopped=!1,m?(T.destination=m,ke(m)&&m.add(T)):T.destination=nt,T}return S.create=function(m,T,f){return new pe(m,T,f)},S.prototype.next=function(m){this.isStopped||this._next(m)},S.prototype.error=function(m){this.isStopped||(this.isStopped=!0,this._error(m))},S.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,y.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(m){this.destination.next(m)},S.prototype._error=function(m){try{this.destination.error(m)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(de),_e=Function.prototype.bind;function ce(y,S){return _e.call(y,S)}var et=function(){function y(S){this.partialObserver=S}return y.prototype.next=function(S){var m=this.partialObserver;if(m.next)try{m.next(S)}catch(T){ae(T)}},y.prototype.error=function(S){var m=this.partialObserver;if(m.error)try{m.error(S)}catch(T){ae(T)}else ae(S)},y.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(m){ae(m)}},y}(),pe=function(y){ge(S,y);function S(m,T,f){var e=y.call(this)||this,o;if(G(m)||!m)o={next:m!=null?m:void 0,error:T!=null?T:void 0,complete:f!=null?f:void 0};else{var i;e&&De.useDeprecatedNextContext?(i=Object.create(m),i.unsubscribe=function(){return e.unsubscribe()},o={next:m.next&&ce(m.next,i),error:m.error&&ce(m.error,i),complete:m.complete&&ce(m.complete,i)}):o=m}return e.destination=new et(o),e}return S}(me);function ae(y){Ve(y)}function tt(y){throw y}var nt={closed:!0,next:Re,error:tt,complete:Re},xe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function He(y){return y}function it(y){return y.length===0?He:y.length===1?y[0]:function(m){return y.reduce(function(T,f){return f(T)},m)}}var Y=function(){function y(S){S&&(this._subscribe=S)}return y.prototype.lift=function(S){var m=new y;return m.source=this,m.operator=S,m},y.prototype.subscribe=function(S,m,T){var f=this,e=ot(S)?S:new pe(S,m,T);return qe(function(){var o=f,i=o.operator,n=o.source;e.add(i?i.call(e,n):n?f._subscribe(e):f._trySubscribe(e))}),e},y.prototype._trySubscribe=function(S){try{return this._subscribe(S)}catch(m){S.error(m)}},y.prototype.forEach=function(S,m){var T=this;return m=Le(m),new m(function(f,e){var o=new pe({next:function(i){try{S(i)}catch(n){e(n),o.unsubscribe()}},error:e,complete:f});T.subscribe(o)})},y.prototype._subscribe=function(S){var m;return(m=this.source)===null||m===void 0?void 0:m.subscribe(S)},y.prototype[xe]=function(){return this},y.prototype.pipe=function(){for(var S=[],m=0;m<arguments.length;m++)S[m]=arguments[m];return it(S)(this)},y.prototype.toPromise=function(S){var m=this;return S=Le(S),new S(function(T,f){var e;m.subscribe(function(o){return e=o},function(o){return f(o)},function(){return T(e)})})},y.create=function(S){return new y(S)},y}();function Le(y){var S;return(S=y!=null?y:De.Promise)!==null&&S!==void 0?S:Promise}function rt(y){return y&&G(y.next)&&G(y.error)&&G(y.complete)}function ot(y){return y&&y instanceof me||rt(y)&&ke(y)}function at(y){return G(y==null?void 0:y.lift)}function X(y){return function(S){if(at(S))return S.lift(function(m){try{return y(m,this)}catch(T){this.error(T)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(y,S,m,T,f){return new st(y,S,m,T,f)}var st=function(y){ge(S,y);function S(m,T,f,e,o,i){var n=y.call(this,m)||this;return n.onFinalize=o,n.shouldUnsubscribe=i,n._next=T?function(c){try{T(c)}catch(l){m.error(l)}}:y.prototype._next,n._error=e?function(c){try{e(c)}catch(l){m.error(l)}finally{this.unsubscribe()}}:y.prototype._error,n._complete=f?function(){try{f()}catch(c){m.error(c)}finally{this.unsubscribe()}}:y.prototype._complete,n}return S.prototype.unsubscribe=function(){var m;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var T=this.closed;y.prototype.unsubscribe.call(this),!T&&((m=this.onFinalize)===null||m===void 0||m.call(this))}},S}(me),lt=new Y(function(y){return y.complete()}),ft=function(y){return y&&typeof y.length=="number"&&typeof y!="function"};function ut(y){return G(y==null?void 0:y.then)}function ct(y){return G(y[xe])}function vt(y){return Symbol.asyncIterator&&G(y==null?void 0:y[Symbol.asyncIterator])}function ht(y){return new TypeError("You provided "+(y!==null&&typeof y=="object"?"an invalid object":"'"+y+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function pt(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gt=pt();function dt(y){return G(y==null?void 0:y[gt])}function mt(y){return Xe(this,arguments,function(){var m,T,f,e;return Fe(this,function(o){switch(o.label){case 0:m=y.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,j(m.read())];case 3:return T=o.sent(),f=T.value,e=T.done,e?[4,j(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,j(f)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return m.releaseLock(),[7];case 10:return[2]}})})}function xt(y){return G(y==null?void 0:y.getReader)}function yt(y){if(y instanceof Y)return y;if(y!=null){if(ct(y))return St(y);if(ft(y))return wt(y);if(ut(y))return Pt(y);if(vt(y))return We(y);if(dt(y))return Ct(y);if(xt(y))return Mt(y)}throw ht(y)}function St(y){return new Y(function(S){var m=y[xe]();if(G(m.subscribe))return m.subscribe(S);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wt(y){return new Y(function(S){for(var m=0;m<y.length&&!S.closed;m++)S.next(y[m]);S.complete()})}function Pt(y){return new Y(function(S){y.then(function(m){S.closed||(S.next(m),S.complete())},function(m){return S.error(m)}).then(null,Ve)})}function Ct(y){return new Y(function(S){var m,T;try{for(var f=ee(y),e=f.next();!e.done;e=f.next()){var o=e.value;if(S.next(o),S.closed)return}}catch(i){m={error:i}}finally{try{e&&!e.done&&(T=f.return)&&T.call(f)}finally{if(m)throw m.error}}S.complete()})}function We(y){return new Y(function(S){It(y,S).catch(function(m){return S.error(m)})})}function Mt(y){return We(mt(y))}function It(y,S){var m,T,f,e;return Ye(this,void 0,void 0,function(){var o,i;return Fe(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,11]),m=je(y),n.label=1;case 1:return[4,m.next()];case 2:if(T=n.sent(),!!T.done)return[3,4];if(o=T.value,S.next(o),S.closed)return[2];n.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i=n.sent(),f={error:i},[3,11];case 6:return n.trys.push([6,,9,10]),T&&!T.done&&(e=m.return)?[4,e.call(m)]:[3,8];case 7:n.sent(),n.label=8;case 8:return[3,10];case 9:if(f)throw f.error;return[7];case 10:return[7];case 11:return S.complete(),[2]}})})}var be=Oe(function(y){return function(){y(this),this.name="EmptyError",this.message="no elements in sequence"}});function At(y,S){return X(function(m,T){var f=0;m.subscribe(J(T,function(e){T.next(y.call(S,e,f++))}))})}var Tt=Array.isArray;function Et(y,S){return Tt(S)?y.apply(void 0,ne([],te(S))):y(S)}function Bt(y){return At(function(S){return Et(y,S)})}function ye(y,S,m){return m?ye(y,S).pipe(Bt(m)):new Y(function(T){var f=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return T.next(o.length===1?o[0]:o)},e=y(f);return G(S)?function(){return S(f,e)}:void 0})}function Rt(y,S){return X(function(m,T){var f=0;m.subscribe(J(T,function(e){return y.call(S,e,f++)&&T.next(e)}))})}function Lt(y,S,m,T,f){return function(e,o){var i=m,n=S,c=0;e.subscribe(J(o,function(l){var u=c++;n=i?y(n,l,u):(i=!0,l),T&&o.next(n)},f&&function(){i&&o.next(n),o.complete()}))}}function Ft(y){return X(function(S,m){var T=!1;S.subscribe(J(m,function(f){T=!0,m.next(f)},function(){T||m.next(y),m.complete()}))})}function Ot(y){return y<=0?function(){return lt}:X(function(S,m){var T=0;S.subscribe(J(m,function(f){++T<=y&&(m.next(f),y<=T&&m.complete())}))})}function kt(y){return y===void 0&&(y=Dt),X(function(S,m){var T=!1;S.subscribe(J(m,function(f){T=!0,m.next(f)},function(){return T?m.complete():m.error(y())}))})}function Dt(){return new be}function Vt(y,S){var m=arguments.length>=2;return function(T){return T.pipe(y?Rt(function(f,e){return y(f,e,T)}):He,Ot(1),m?Ft(S):kt(function(){return new be}))}}function Ht(y,S){return X(Lt(y,S,arguments.length>=2,!0))}function Wt(y,S){return X(function(m,T){var f=null,e=0,o=!1,i=function(){return o&&!f&&T.complete()};m.subscribe(J(T,function(n){f==null||f.unsubscribe();var c=0,l=e++;yt(y(n,l)).subscribe(f=J(T,function(u){return T.next(S?S(n,u,l,c++):u)},function(){f=null,i()}))},function(){o=!0,i()}))})}const Se=20,Ue=40*Se,Ge=30*Se;function z(y){var T;const S=y.toString().match(/^(\d+\.?\d*)(vw|vh|rem)$/);if(!S)throw new Error("s can not convert to vw vh");const m={vw:Ue*.01,vh:Ge*.01,rem:Se};return+S[1]*((T=m[S[2]])!=null?T:1)}const q=b.exports.Engine.create({gravity:{x:0,y:z`0.2rem`}}),ze=b.exports.Render.create({element:document.body,engine:q,options:{width:Ue,height:Ge,wireframes:!1}}),bt=b.exports.Runner.create();b.exports.Render.run(ze);b.exports.Runner.run(bt,q);const Ut=b.exports.Bodies.rectangle(z`80vw`,z`60vh`,z`8rem`,z`1rem`,{isStatic:!0}),Gt=b.exports.Composites.stack(z`70vw`,z`30vh`,4,4,z`0rem`,z`0rem`,(y,S)=>b.exports.Bodies.polygon(y,S,8,z`1rem`)),se=b.exports.Bodies.circle(z`30vw`,z`60vh`,z`1.5rem`),Qe=b.exports.Constraint.create({pointA:b.exports.Vector.clone(se.position),bodyB:se,stiffness:.05}),zt=b.exports.Mouse.create(ze.canvas),Ne=b.exports.MouseConstraint.create(q,{mouse:zt,constraint:{render:{visible:!0}}});b.exports.Composite.add(q.world,[Ut,Gt,Qe,se,Ne]);const Qt=ye(y=>b.exports.Events.on(Ne,"mouseup",y)),Nt=ye(y=>b.exports.Events.on(q,"afterUpdate",y));Qt.pipe(Wt(()=>Nt.pipe(Vt())),Ht(y=>b.exports.Bodies.circle(y.position.x,y.position.y,z`1.5rem`),se)).subscribe(function(S){Qe.bodyB=S,b.exports.Composite.add(q.world,[S])});
